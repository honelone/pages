import{u as Z}from"./index-3Q3O_9EL.js";import{C as $,D as ee,E as te,F as ae,G as ne,A as oe,B as se,a as ie,b as le,c as re,d as ce,e as ue,f as de,g as he,h as ve,i as fe,j as me,k as pe,l as ge,m as Ce,n as ye,o as be,p as ke,q as _e,r as we,s as Me,t as Pe,u as Re}from"./B4-ikGdK3kG.js";import{n as i,d as Le,h as Te,l as Se,s as Ae,k as G,f as Be,a as h,t as De,A as Ie,o as Fe}from"./index-a2ZRDqhh.js";import{g as Ge}from"./color-CWPKctqu.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";const We=[$,ee,te,ae,ne,oe,se,ie,le,re,ce,ue,de,he,ve,fe,me,pe,ge,Ce,ye,be,ke,_e,we,Me,Pe,Re];function Oe(){const M=i(We),r=i([]);return r.value=M.value.map(c=>Z(c,{playbackRate:.5})),{playList:r}}const je={class:"wave-canvas-container"},qe={class:"controller"},He={class:"controller-item"},Ne=900,Je=127,Ve=Le({__name:"index",setup(M){const r=i(),c=i(),y=i(),b=e=>{const t=window.devicePixelRatio,{width:a,height:n}=e.getBoundingClientRect();e.width=Math.round(a*t),e.height=Math.round(n*t);const s=e.getContext("2d");s==null||s.scale(t,-t),s.translate(0,-n),s.translate(a*.5,n*.5)},p=i(0),g=i(0),l=Te(()=>({x:.8*p.value,y:.8*g.value})),E=()=>{const{width:e,height:t}=c.value.getBoundingClientRect();p.value=e,g.value=t},W=()=>{b(r.value),b(c.value),b(y.value),E()};Se(()=>{o.list=new Array(P.value.length).fill("").map((e,t)=>_(t,P.value.length)),W(),O()});const{playList:P}=Oe(),o=Ae({list:[],backup:{x:0,y:0},orbitList:[]}),O=()=>{L(),S(),w()},k=e=>{e.clearRect(-p.value/2,-g.value/2,p.value,g.value)},R=i(!0);G(R,()=>{L()});const L=e=>{e||(e=Math.max(l.value.x,l.value.y));const t=r.value.getContext("2d");k(t),R.value&&(t.beginPath(),t.strokeStyle="#00ff00cc",t.moveTo(-e,0),t.lineTo(e,0),t.stroke(),t.fillStyle="#ff0000cc",t.beginPath(),t.arc(0,0,2.5,0,2*Math.PI),t.fill())},T=i(!0);G(T,()=>{S()});const S=()=>{const e=c.value.getContext("2d");k(e);const t=Math.min(l.value.x,l.value.y)*.02,a=(Math.min(l.value.x,l.value.y)/2-t)/o.list.length;T.value&&o.list.map((n,s)=>{const C=t+s*a;e.strokeStyle=n,e.lineWidth=2,e.beginPath(),e.arc(0,0,C,0*Math.PI,2*Math.PI),e.stroke()})},j=e=>{const t=y.value.getContext("2d");k(t);const a=Math.min(l.value.x,l.value.y)*.02,n=(Math.min(l.value.x,l.value.y)/2-a)/o.list.length,s=5;o.backup={x:0,y:0},o.list.forEach((C,u)=>{const B=a+u*n,Q=2*Math.PI,U=Je-u,X=Q*U/Ne,D=Math.PI*2,I=(Math.PI+e*X)%D,F=D-I,d=I/Math.PI;(d<1&&1-d<.01||d<2&&2-d<.01)&&console.log(d);const f=B*Math.cos(F),m=B*Math.sin(F);t.fillStyle="white",t.beginPath();const Y=s*.8;t.arc(f,m,Y,0,2*Math.PI),t.fill(),V.value&&q(t,f,m),x.value&&H(t,f,m,u),z.value&&N(t,f,m,u),o.backup={x:f,y:m}})},q=(e,t,a)=>{e.strokeStyle="white",e.lineWidth=3,e.beginPath(),e.moveTo(0,0),e.lineTo(t,a),e.stroke()},H=(e,t,a,n)=>{e.strokeStyle="#fff",e.lineWidth=(n+1)*.1,e.beginPath(),e.moveTo(o.backup.x,o.backup.y),e.lineTo(t,a),e.stroke()},N=(e,t,a,n)=>{const s=e.createLinearGradient(0,0,t,a),C=n===0?"white":_(n-1,o.list.length),u=_(n,o.list.length);s.addColorStop(0,C),s.addColorStop(1,u),e.beginPath(),e.moveTo(o.backup.x,o.backup.y),e.lineTo(t,a),e.lineWidth=(n+1)*.1,e.lineJoin="round",e.lineCap="round",e.strokeStyle=s,e.stroke()},_=(e,t)=>{const a=Math.round(e/t*360*100)/100;return Ge(a)};let J=0,A=0,v=i();const w=()=>{A++;const e=(A-J)/60;j(e),v.value=requestAnimationFrame(w)},V=i(!1),x=i(!1),z=i(!1),K=()=>{v.value?(cancelAnimationFrame(v.value),v.value=void 0):w()};return(e,t)=>(Fe(),Be("div",je,[h("canvas",{id:"coordinate",ref_key:"coordinateRef",ref:r},null,512),h("canvas",{id:"orbit",ref_key:"orbitRef",ref:c},null,512),h("canvas",{id:"circle",ref_key:"circleRef",ref:y},null,512),h("div",qe,[h("div",He,[h("div",{class:"btn",onClick:K},De(Ie(v)?"Stop":"Play"),1)])])]))}}),Ye=Ee(Ve,[["__scopeId","data-v-2bfa531d"]]);export{Ye as default};
