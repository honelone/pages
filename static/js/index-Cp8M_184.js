import{h as Ht,s as qt,n as ye,d as ve,q as Ce,l as be,f as Me,e as Le,p as ke,b as Ee,a as st,o as xe}from"./index-DblQHoIm.js";import{u as Ie}from"./index-DEDEmN9i.js";import Fe from"./index-DSKkTIgH.js";import{_ as _e}from"./plugin-vueexport-helper-DlAUqK2U.js";function De(v){const h={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5},p=["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror"],S=["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],g=["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"],m=typeof window<"u"&&typeof window.document<"u"?window.document:{},f="fullscreenEnabled"in m&&Object.keys(h)||p[0]in m&&p||S[0]in m&&S||g[0]in m&&g||[],w={requestFullscreen:function(y){return y[f[h.requestFullscreen]]()},requestFullscreenFunction:function(y){return y[f[h.requestFullscreen]]},get exitFullscreen(){return m[f[h.exitFullscreen]].bind(m)},addEventListener:function(y,F,T){return m.addEventListener(f[h[y]],F,T)},removeEventListener:function(y,F){return m.removeEventListener(f[h[y]],F)},get fullscreenEnabled(){return!!m[f[h.fullscreenEnabled]]},set fullscreenEnabled(d){},get fullscreenElement(){return m[f[h.fullscreenElement]]},set fullscreenElement(d){},get onfullscreenchange(){return m[("on"+f[h.fullscreenchange]).toLowerCase()]},set onfullscreenchange(d){return m[("on"+f[h.fullscreenchange]).toLowerCase()]=d},get onfullscreenerror(){return m[("on"+f[h.fullscreenerror]).toLowerCase()]},set onfullscreenerror(d){return m[("on"+f[h.fullscreenerror]).toLowerCase()]=d}};v.fscreen=w}function Te(v){const h={};return h.toDeg=180/v.PI,h.toRad=v.PI/180,h.halfPI=v.PI/2,h.twoPI=v.PI*2,h.dist=(p,S)=>v.sqrt(p*p+S*S),h.pointDist=(p,S,g,m)=>{const f=g-p,w=m-S;return v.sqrt(f*f+w*w)},h.angle=(p,S)=>h.halfPI+v.atan2(S,p),h.pointAngle=(p,S,g,m)=>h.halfPI+v.atan2(m-S,g-p),h.splitVector=(p,S)=>({x:v.sin(S)*p,y:-v.cos(S)*p}),h.random=(p,S)=>v.random()*(S-p)+p,h.randomInt=(p,S)=>(v.random()*(S-p+1)|0)+p,h.randomChoice=function(S){return arguments.length===1&&Array.isArray(S)?S[v.random()*S.length|0]:arguments[v.random()*arguments.length|0]},h.clamp=function(S,g,m){return v.min(v.max(S,g),m)},h}const St=Te(Math);function Pe(v){const h={};h.addListener=function(d){if(typeof d!="function")throw"Ticker.addListener() requires a function reference passed for a callback.";g.push(d),p||(p=!0,m())};let p=!1,S=0;const g=[];function m(){requestAnimationFrame(f)}function f(w){let d=w-S;S=w,d<0?d=17:d>68&&(d=68),g.forEach(y=>y.call(v,d,d/16.6667)),m()}return h}function He(v,h,p){let S=0;function g(m){if(typeof m=="string"&&(m=h.getElementById(m)),!m)return;this.canvas=m,this.ctx=m.getContext("2d"),this.canvas.style.touchAction="none",this.speed=1,this.dpr=g.disableHighDPI?1:(v.devicePixelRatio||1)/(this.ctx.backingStorePixelRatio||1),this.width=m.width,this.height=m.height,this.naturalWidth=this.width*this.dpr,this.naturalHeight=this.height*this.dpr,this.width!==this.naturalWidth&&(this.canvas.width=this.naturalWidth,this.canvas.height=this.naturalHeight,this.canvas.style.width=this.width+"px",this.canvas.style.height=this.height+"px");const f=["blackdiamondfireworks.de"],w=h.location.hostname;f.some(d=>w.includes(d))&&setTimeout(()=>{const y=`<style>
						body { background-color: #000; padding: 20px; text-align: center; color: #ddd; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; overflow: visible; }
						h1 { font-size: 1.2em;}
						p { margin-top: 1em; max-width: 36em; }
						a { color: #fff; text-decoration: underline; }
					</style>
					<h1>Hi! Sorry to interrupt the fireworks.</h1>
					<p>My name is Caleb. Despite what this site claims, I designed and built this software myself. I've spent a couple hundred hours of my own time, over two years, making it.</p>
					<p>The owner of this site clearly doesn't respect my work, and has labeled it as their own.</p>
					<p>If you were enjoying the show, please check out <a href="https://codepen.io/MillerTime/full/XgpNwb">my&nbsp;official&nbsp;version&nbsp;here</a>!</p>
					<p>If you're the owner, <a href="mailto:calebdotmiller@gmail.com">contact me</a>.</p>`;h.body.innerHTML=y},18e4),g.stages.push(this),this._listeners={resize:[],pointerstart:[],pointermove:[],pointerend:[],lastPointerPos:{x:0,y:0}}}return g.stages=[],g.disableHighDPI=!1,g.prototype.addEventListener=function(f,w){var d;try{f==="ticker"?p.addListener(w):(d=this._listeners)==null||d[f].push(w)}catch{throw"Invalid Event"}},g.prototype.dispatchEvent=function(f,w){const d=this._listeners[f];if(d)d.forEach(y=>y.call(this,w));else throw"Invalid Event"},g.prototype.resize=function(f,w){this.width=f,this.height=w,this.naturalWidth=f*this.dpr,this.naturalHeight=w*this.dpr,this.canvas.width=this.naturalWidth,this.canvas.height=this.naturalHeight,this.canvas.style.width=f+"px",this.canvas.style.height=w+"px",this.dispatchEvent("resize")},g.windowToCanvas=function(f,w,d){const y=f.getBoundingClientRect();return{x:(w-y.left)*(f.width/y.width),y:(d-y.top)*(f.height/y.height)}},g.mouseHandler=function(f){if(Date.now()-S<500)return;let w="start";f.type==="mousemove"?w="move":f.type==="mouseup"&&(w="end"),g.stages.forEach(d=>{const y=g.windowToCanvas(d.canvas,f.clientX,f.clientY);d.pointerEvent(w,y.x/d.dpr,y.y/d.dpr)})},g.touchHandler=function(f){S=Date.now();let w="start";f.type==="touchmove"?w="move":f.type==="touchend"&&(w="end"),g.stages.forEach(d=>{for(const y of Array.from(f.changedTouches)){let F;w!=="end"?(F=g.windowToCanvas(d.canvas,y.clientX,y.clientY),d._listeners.lastPointerPos=F,w==="start"&&d.pointerEvent("move",F.x/d.dpr,F.y/d.dpr)):F=d._listeners.lastPointerPos,d.pointerEvent(w,F.x/d.dpr,F.y/d.dpr)}})},g.prototype.pointerEvent=function(f,w,d){const y={type:f,x:w,y:d};y.onCanvas=w>=0&&w<=this.width&&d>=0&&d<=this.height,this.dispatchEvent("pointer"+f,y)},h.addEventListener("mousedown",g.mouseHandler),h.addEventListener("mousemove",g.mouseHandler),h.addEventListener("mouseup",g.mouseHandler),h.addEventListener("touchstart",g.touchHandler),h.addEventListener("touchmove",g.touchHandler),h.addEventListener("touchend",g.touchHandler),g}const Re=Pe(window),Rt=He(window,document,Re);function qe(){const v=window.innerWidth<=640,h=window.innerWidth>800,p=h&&window.innerHeight<300,S=Ht(()=>v?.9:p?.75:1),g=Ht(()=>{const f=navigator.hardwareConcurrency;if(f){const w=window.innerWidth<=1024?4:8;return f>=w}else return!1});return{state:qt({paused:!1,soundEnabled:!0,menuOpen:!1,openHelpTopic:null,fullscreen:!1,config:{quality:g.value?3:2,shell:"Random",size:h?"3":p?"1.2":"2",autoLaunch:!0,finale:!1,skyLighting:2,hideControls:p,longExposure:!1,scaleFactor:S.value}})}}const We="/pages/static/mp3/burst-sm-1-giaWz7DW.mp3",ze="/pages/static/mp3/burst-sm-2-j5DbIoqH.mp3",Oe="/pages/static/mp3/burst1-CfBzmPqS.mp3",Ae="/pages/static/mp3/burst2-DuB8hlxd.mp3",Ve="/pages/static/mp3/crackle-sm-1-DKPg9x1c.mp3",Ye="/pages/static/mp3/crackle1-CElk69-5.mp3",Ge="/pages/static/mp3/lift1-2qhCOFJo.mp3",Xe="/pages/static/mp3/lift2-BHJKxzJE.mp3",Be="/pages/static/mp3/lift3-Cs9CTP3o.mp3",Ne=[We,ze,Oe,Ae,Ve,Ye,Ge,Xe,Be];function je(){const v=ye(Ne),h=qt({burstSm1:void 0,burstSm2:void 0,burst1:void 0,burst2:void 0,crackleSm1:void 0,crackle1:void 0,lift1:void 0,lift2:void 0,lift3:void 0});return Object.keys(h).forEach((p,S)=>{h[p]=Ie(v.value[S])}),{playList:h}}const Ue=v=>(ke("data-v-2741c89d"),v=v(),Ee(),v),Ke={class:"fireworks-container"},Qe=Ue(()=>st("div",{class:"stage-container"},[st("div",{class:"canvas-container"},[st("canvas",{id:"trails-canvas"}),st("canvas",{id:"main-canvas"})])],-1)),$e=ve({__name:"index",setup(v){const{state:h}=qe(),{playList:p}=je();return Ce(()=>{window.fscreen=null}),be(()=>{navigator.mediaDevices.getUserMedia({audio:!0}),De(window);const S=window.innerWidth>800,g=S&&window.innerHeight<300,m=7680,f=4320,w=.9;let d=1,y,F,T=1,Z=!1,Q=!1;const Wt=1,wt=3,yt=0,C={Red:"#ff0043",Green:"#14fc56",Blue:"#1e7fff",Purple:"#e60aff",Gold:"#ffbf36",White:"#ffffff"},W="_INVISIBLE_",R=Math.PI*2,rt=Math.PI*.5,vt=new Rt("trails-canvas"),P=new Rt("main-canvas"),Ct=[vt,P];console.log(Ct);function zt(){T=Ot(),Z=T===Wt,Q=T===wt,at()===yt&&(z.canvasContainer.style.backgroundColor="#000"),O.drawWidth=T===wt?.75:1}const it=(t=h)=>!t.paused&&!t.menuOpen,Ot=()=>+h.config.quality,A=()=>h.config.shell,B=()=>+h.config.size,At=()=>h.config.finale,at=()=>+h.config.skyLighting,bt=()=>h.config.scaleFactor,z={stageContainer:".stage-container",canvasContainer:".canvas-container"};Object.keys(z).forEach(t=>{z[t]=document.querySelector(z[t])}),console.log(z);const V=Object.keys(C).map(t=>C[t]),lt=[...V,W];lt.reduce((t,e,o)=>(t[e]=o,t),{});const Mt={};V.forEach(t=>{Mt[t]={r:parseInt(t.substr(1,2),16),g:parseInt(t.substr(3,2),16),b:parseInt(t.substr(5,2),16)}});function tt(){return V[Math.random()*V.length|0]}let Lt;function x(t){const e=t&&t.notSame,o=t&&t.notColor,r=t&&t.limitWhite;let s=tt();if(r&&s===C.White&&Math.random()<.6&&(s=tt()),e)for(;s===Lt;)s=tt();else if(o)for(;s===o;)s=tt();return Lt=s,s}function ct(){return Math.random()<.5?C.Gold:C.White}function N(t){return t===C.White||t===C.Gold?x({notColor:t}):ct()}const $=(t=1)=>{const e=Math.random()<.25,o=Math.random()<.72,r=o?x({limitWhite:!0}):[x(),x({notSame:!0})],s=o&&Math.random()<.42,c=s&&N(r),a=o&&(Math.random()<.2||r===C.White)?c||x({notColor:r,limitWhite:!0}):null,l=!s&&r!==C.White&&Math.random()<.42;let i=e?1.1:1.25;return Z&&(i*=.8),Q&&(i=1.2),{shellSize:t,spreadSize:300+t*100,starLife:900+t*200,starDensity:i,color:r,secondColor:a,glitter:e?"light":"",glitterColor:ct(),pistil:s,pistilColor:c,streamers:l}},Vt=(t=1)=>{const e=$(t);e.starLife*=1.5;const o=x({notColor:C.White});return e.streamers=!0,Math.random()<.42&&N(o),e.color=W,e.secondColor=o,e.glitter="",e},Yt=(t=1)=>{const e=x({limitWhite:!0});return{shellSize:t,spreadSize:280+t*92,starLife:1100+t*200,starLifeVariation:.4,starDensity:1.1,color:e,glitter:"light",glitterColor:C.White,strobe:!0,strobeColor:Math.random()<.5?C.White:null,pistil:Math.random()<.5,pistilColor:N(e)}},Gt=(t=1)=>{const e=x(),o=Math.random()<.5;return{shellSize:t,color:e,spreadSize:250+t*75,starDensity:o?.15:.4,starLife:1800+t*200,glitter:o?"thick":"heavy"}},ht=(t=1)=>{const e=x(),o=Math.random()<.75;return{shellSize:t,ring:!0,color:e,spreadSize:300+t*100,starLife:900+t*200,starCount:2.2*R*(t+1),pistil:o,pistilColor:N(e),glitter:o?"":"light",glitterColor:e===C.Gold?C.Gold:C.White,streamers:Math.random()<.3}},Xt=(t=1)=>{const e=x({limitWhite:!0});return{shellSize:t,spreadSize:300+t*100,starLife:750+t*160,starLifeVariation:.4,starDensity:.85,color:e,crossette:!0,pistil:Math.random()<.5,pistilColor:N(e)}},Bt=(t=1)=>({shellSize:t,spreadSize:300+t*120,starDensity:.12,starLife:500+t*50,starLifeVariation:.5,color:Math.random()<.65?"random":Math.random()<.15?x():[x(),x({notSame:!0})],floral:!0}),Nt=(t=1)=>({shellSize:t,color:W,spreadSize:300+t*120,starDensity:.12,starLife:500+t*50,starLifeVariation:.5,glitter:"medium",glitterColor:C.Gold,fallingLeaves:!0}),jt=(t=1)=>({shellSize:t,spreadSize:300+t*100,starDensity:.6,starLife:3e3+t*300,glitter:"willow",glitterColor:C.Gold,color:W}),Ut=(t=1)=>{const e=Math.random()<.75?C.Gold:x();return{shellSize:t,spreadSize:380+t*75,starDensity:Z?.65:1,starLife:600+t*100,starLifeVariation:.32,glitter:"light",glitterColor:C.Gold,color:e,crackle:!0,pistil:Math.random()<.65,pistilColor:N(e)}},Kt=(t=1)=>{const e=x();return{shellSize:t,horsetail:!0,color:e,spreadSize:250+t*38,starDensity:.9,starLife:2500+t*300,glitter:"medium",glitterColor:Math.random()<.5?ct():e,strobe:e===C.White}};function dt(){return Math.random()<.5?"Crysanthemum":Et[Math.random()*(Et.length-1)+1|0]}function kt(t){var e;return g?nt()(t):(e=H[dt()])==null?void 0:e.call(H,t)}function et(t){var e;return(e=H[A()])==null?void 0:e.call(H,t)}const Qt=["Falling Leaves","Floral","Willow"];function nt(){const t=A()==="Random";let e=t?dt():A();if(t)for(;Qt.includes(e);)e=dt();return H[e]}const H={Random:kt,Crackle:Ut,Crossette:Xt,Crysanthemum:$,"Falling Leaves":Nt,Floral:Bt,Ghost:Vt,"Horse Tail":Kt,Palm:Gt,Ring:ht,Strobe:Yt,Willow:jt},Et=Object.keys(H);function $t(){zt()}function xt(t){return(1-.18*2)*t+.18}function It(t){return t*.75}function Jt(){return xt(Math.random())}function Zt(){return It(Math.random())}function ot(){const t=B(),e=Math.min(2.5,t),o=Math.random()*e,r=t-o,s=e===0?Math.random():1-o/e,c=Math.random()*(1-s*.65)*.5,a=Math.random()<.5?.5-c:.5+c;return{size:r,x:xt(a),height:It(s)}}function te(t){const e=new _(et(B())),o=P.width,r=P.height;e.launch(t?t.x/o:Jt(),t?1-t.y/r:Zt())}function ee(){const t=ot(),e=new _(et(t.size));e.launch(t.x,t.height);let o=e.starLife;return e.fallingLeaves&&(o=4600),900+Math.random()*600+o}function ne(){const t=nt(),e=ot(),o=new _(t(e.size));o.launch(e.x,e.height);const r=o.starLife;return 900+Math.random()*600+r}function Ft(){const t=ot(),e=ot(),o=new _(et(t.size)),r=new _(et(e.size)),s=Math.random()*.2-.1,c=Math.random()*.2-.1;o.launch(.3+s,t.height),setTimeout(()=>{r.launch(.7+c,e.height)},100);let a=Math.max(o.starLife,r.starLife);return(o.fallingLeaves||r.fallingLeaves)&&(a=4600),900+Math.random()*600+a}function oe(){const t=nt(),e=B(),o=Math.max(0,e-1.25),r=Math.random()*.08-.04;new _(t(e)).launch(.5+r,.7);const c=1e3+Math.random()*400,a=1e3+Math.random()*400;return setTimeout(()=>{const l=Math.random()*.08-.04;new _(t(o)).launch(.2+l,.1)},c),setTimeout(()=>{const l=Math.random()*.08-.04;new _(t(o)).launch(.8+l,.1)},a),4e3}function se(){const t=S?7:4,e=B(),o=Math.max(0,e-3),r=Math.random()<.78?$:ht,s=kt;function c(i,u){const b=A()==="Random"?u?s:r:H[A()],n=new _(b(u?e:o)),I=i<=.5?i/.5:(1-i)/.5;n.launch(i,u?.75:I*.42)}let a=0,l=0;for(;a<=t;){if(a===t)setTimeout(()=>{c(.5,!0)},l);else{const i=a/t*.5,u=Math.random()*30+30;setTimeout(()=>{c(i,!1)},l),setTimeout(()=>{c(1-i,!1)},l+u)}a++,l+=200}return 3400+t*250}function j(){j.lastCalled=Date.now();const t=S?11:5,e=S?3:1,o=Math.max(0,B()-2),r=Math.random()<.78?$:ht,s=nt();function c(i,u){const b=A()==="Random"?u?s:r:H[A()],n=new _(b(o)),I=(Math.cos(i*5*Math.PI+rt)+1)/2;n.launch(i,I*.75)}let a=0,l=0;for(;a<t;){if(a===0)c(.5,!1),a+=1;else{const i=(a+1)/t/2,u=Math.random()*30+30,k=a===e;setTimeout(()=>{c(.5+i,k)},l),setTimeout(()=>{c(.5-i,k)},l+u),a+=2}l+=200}return 3400+t*120}j.cooldown=15e3,j.lastCalled=Date.now();let _t=!0;const re=32;let ut=0;function ie(){if(_t)return _t=!1,g?Ft():(new _($(B())).launch(.5,.5),2400);if(At())return ne(),ut<re?(ut++,170):(ut=0,6e3);const t=Math.random();if(t<.08&&Date.now()-j.lastCalled>j.cooldown)return j();if(t<.1)return se();if(t<.6&&!g)return ee();if(t<.8)return Ft();if(t<1)return oe()}let J=!1;function ae(t){it()&&(Tt(t)?J=!0:t.onCanvas&&te(t))}function le(){J=!1}function ce(t){it()&&J&&Tt(t)}P.addEventListener("pointerstart",ae),P.addEventListener("pointerend",le),P.addEventListener("pointermove",ce);function Dt(){const t=window.innerWidth,e=window.innerHeight,o=Math.min(t,m),r=t<=420?e:Math.min(e,f);z.stageContainer.style.width=o+"px",z.stageContainer.style.height=r+"px",Ct.forEach(c=>c.resize(o,r));const s=bt();y=o/s,F=r/s}Dt(),window.addEventListener("resize",Dt);let ft=0,U=0,pt=0;function Tt(t){if(J||t.y>=P.height-44){const o=(t.x-16)/(P.width-32);return d=Math.min(Math.max(o,0),1),U=1,!0}return!1}function he(t,e){ft++,J||(U-=e/30,U<0&&(U=0)),h.config.autoLaunch&&(pt-=t,pt<=0&&(pt=ie()*1.25))}function de(t,e){if(!it())return;const o=t*d,r=d*e;he(o,e);const s=1-(1-D.airDrag)*r,c=1-(1-D.airDragHeavy)*r,a=1-(1-O.airDrag)*r,l=o/1e3*w;lt.forEach(i=>{const u=D.active[i];for(let b=u.length-1;b>=0;b=b-1){const n=u[b];if(n.updateFrame!==ft)if(n.updateFrame=ft,n.life-=o,n.life<=0)u.splice(b,1),D.returnInstance(n);else{const I=Math.pow(n.life/n.fullLife,.5),M=1-I;if(n.prevX=n.x,n.prevY=n.y,n.x+=n.speedX*r,n.y+=n.speedY*r,n.heavy?(n.speedX*=c,n.speedY*=c):(n.speedX*=s,n.speedY*=s),n.speedY+=l,n.spinRadius&&(n.spinAngle+=n.spinSpeed*r,n.x+=Math.sin(n.spinAngle)*n.spinRadius*r,n.y+=Math.cos(n.spinAngle)*n.spinRadius*r),n.sparkFreq)for(n.sparkTimer-=o;n.sparkTimer<0;)n.sparkTimer+=n.sparkFreq*.75+n.sparkFreq*M*4,O.add(n.x,n.y,n.sparkColor,Math.random()*R,Math.random()*n.sparkSpeed*I,n.sparkLife*.8+Math.random()*n.sparkLifeVariation*n.sparkLife);n.life<n.transitionTime&&(n.secondColor&&!n.colorChanged&&(n.colorChanged=!0,n.color=n.secondColor,u.splice(b,1),D.active[n.secondColor].push(n),n.secondColor===W&&(n.sparkFreq=0)),n.strobe&&(n.visible=Math.floor(n.life/n.strobeFreq)%3===0))}}const k=O.active[i];for(let b=k.length-1;b>=0;b=b-1){const n=k[b];n.life-=o,n.life<=0?(k.splice(b,1),O.returnInstance(n)):(n.prevX=n.x,n.prevY=n.y,n.x+=n.speedX*r,n.y+=n.speedY*r,n.speedX*=a,n.speedY*=a,n.speedY+=l)}}),ue(r)}function ue(t){const{dpr:e}=P,o=y,r=F,s=vt.ctx,c=P.ctx;at()!==yt&&fe(t);const a=bt();for(s.scale(e*a,e*a),c.scale(e*a,e*a),s.globalCompositeOperation="source-over",s.fillStyle=`rgba(0, 0, 0, ${h.config.longExposure?.0025:.175*t})`,s.fillRect(0,0,o,r),c.clearRect(0,0,o,r);K.active.length;){const l=K.active.pop(),i=s.createRadialGradient(l.x,l.y,0,l.x,l.y,l.radius);i.addColorStop(.024,"rgba(255, 255, 255, 1)"),i.addColorStop(.125,"rgba(255, 160, 20, 0.2)"),i.addColorStop(.32,"rgba(255, 140, 20, 0.11)"),i.addColorStop(1,"rgba(255, 120, 20, 0)"),s.fillStyle=i,s.fillRect(l.x-l.radius,l.y-l.radius,l.radius*2,l.radius*2),K.returnInstance(l)}s.globalCompositeOperation="lighten",s.lineWidth=D.drawWidth,s.lineCap=Z?"square":"round",c.strokeStyle="#fff",c.lineWidth=1,c.beginPath(),V.forEach(l=>{const i=D.active[l];s.strokeStyle=l,s.beginPath(),i.forEach(u=>{u.visible&&(s.moveTo(u.x,u.y),s.lineTo(u.prevX,u.prevY),c.moveTo(u.x,u.y),c.lineTo(u.x-u.speedX*1.6,u.y-u.speedY*1.6))}),s.stroke()}),c.stroke(),s.lineWidth=O.drawWidth,s.lineCap="butt",V.forEach(l=>{const i=O.active[l];s.strokeStyle=l,s.beginPath(),i.forEach(u=>{s.moveTo(u.x,u.y),s.lineTo(u.prevX,u.prevY)}),s.stroke()}),U&&(c.globalAlpha=U,c.fillStyle=C.Blue,c.fillRect(0,r-6,o*d,6),c.globalAlpha=1),s.setTransform(1,0,0,1,0,0),c.setTransform(1,0,0,1,0,0)}const q={r:0,g:0,b:0},E={r:0,g:0,b:0};function fe(t){const e=at()*15,o=500;let r=0;E.r=0,E.g=0,E.b=0,V.forEach(l=>{const i=Mt[l],u=D.active[l].length;r+=u,E.r+=i.r*u,E.g+=i.g*u,E.b+=i.b*u});const s=Math.pow(Math.min(1,r/o),.3),c=Math.max(1,E.r,E.g,E.b);E.r=E.r/c*e*s,E.g=E.g/c*e*s,E.b=E.b/c*e*s;const a=10;q.r+=(E.r-q.r)/a*t,q.g+=(E.g-q.g)/a*t,q.b+=(E.b-q.b)/a*t,z.canvasContainer.style.backgroundColor=`rgb(${q.r|0}, ${q.g|0}, ${q.b|0})`}P.addEventListener("ticker",de);function mt(t,e,o,r,s){const c=e/o,a=t+e-c*.5;if(a>t)for(let l=t;l<a;l=l+c)s(l+Math.random()*c*r);else for(let l=t;l>a;l=l+c)s(l+Math.random()*c*r)}function Y(t,e,o=0,r=R){const c=2*(.5*Math.sqrt(t/Math.PI))*Math.PI,a=c/2;for(let l=0;l<=a;l++){const i=l/a*rt,u=Math.cos(i),k=c*u,b=k*(r/R),n=R/k,I=Math.random()*n+o,M=n*.33;for(let L=0;L<b;L++){const G=Math.random()*M,gt=n*L+I+G;e(gt,u)}}}function pe(t){const e=Math.random()*rt;mt(e,R,4,.5,o=>{D.add(t.x,t.y,t.color,o,Math.random()*.6+.75,600)})}function me(t){const e=12+6*T;Y(e,(r,s)=>{D.add(t.x,t.y,t.color,r,s*2.4,1e3+Math.random()*300,t.speedX,t.speedY)}),K.add(t.x,t.y,46),Math.random()<.5?p.burstSm1.play():p.burstSm2.play()}function ge(t){Y(7,(o,r)=>{const s=D.add(t.x,t.y,W,o,r*2.4,2400+Math.random()*600,t.speedX,t.speedY);s.sparkColor=C.Gold,s.sparkFreq=144/T,s.sparkSpeed=.28,s.sparkLife=750,s.sparkLifeVariation=3.2}),K.add(t.x,t.y,46),Math.random()<.5?p.burstSm1.play():p.burstSm2.play()}function Se(t){mt(0,R,Q?32:16,1.8,o=>{O.add(t.x,t.y,C.Gold,o,Math.pow(Math.random(),.45)*2.4,300+Math.random()*200)})}class _{constructor(e){if(Object.assign(this,e),this.starLifeVariation=e.starLifeVariation||.125,this.color=e.color||x(),this.glitterColor=e.glitterColor||this.color,!this.starCount){const o=e.starDensity||1,r=this.spreadSize/54;this.starCount=Math.max(6,r*r*o)}}launch(e,o){const r=y,s=F,c=60,a=50,i=s-s*.45,u=e*(r-c*2)+c,k=s,b=i-o*(i-a),n=k-b,I=Math.pow(n*.04,.64),M=this.comet=D.add(u,k,typeof this.color=="string"&&this.color!=="random"?this.color:C.White,Math.PI,I*(this.horsetail?1.2:1),I*(this.horsetail?100:400));M.heavy=!0,M.spinRadius=St.random(.32,.85),M.sparkFreq=32/T,Q&&(M.sparkFreq=8),M.sparkLife=320,M.sparkLifeVariation=3,(this.glitter==="willow"||this.fallingLeaves)&&(M.sparkFreq=20/T,M.sparkSpeed=.5,M.sparkLife=500),this.color===W&&(M.sparkColor=C.Gold),Math.random()>.4&&!this.horsetail&&(M.secondColor=W,M.transitionTime=Math.pow(Math.random(),1.5)*700+500),M.onDeath=G=>this.burst(G.x,G.y);const L=Math.random();L<.33?p.lift1.play():L<.66?p.lift2.play():p.lift3.play()}burst(e,o){const r=this.spreadSize/96;let s,c,a,l,i,u=.25,k=!1;this.crossette&&(c=n=>{k||(p.crackleSm1.play(),k=!0),pe(n)}),this.crackle&&(c=n=>{k||(p.crackle1.play(),k=!0),Se(n)}),this.floral&&(c=me),this.fallingLeaves&&(c=ge),this.glitter==="light"?(a=400,l=.3,i=300,u=2):this.glitter==="medium"?(a=200,l=.44,i=700,u=2):this.glitter==="heavy"?(a=80,l=.8,i=1400,u=2):this.glitter==="thick"?(a=16,l=Q?1.65:1.5,i=1400,u=3):this.glitter==="streamer"?(a=32,l=1.05,i=620,u=2):this.glitter==="willow"?(a=120,l=.34,i=1400,u=3.8):a=0,a=a/T;const b=(n,I)=>{const M=this.spreadSize/1800,L=D.add(e,o,s||x(),n,I*r,this.starLife+Math.random()*this.starLife*this.starLifeVariation,this.horsetail?this.comet&&this.comet.speedX:0,this.horsetail?this.comet&&this.comet.speedY:-M);this.secondColor&&(L.transitionTime=this.starLife*(Math.random()*.05+.32),L.secondColor=this.secondColor),this.strobe&&(L.transitionTime=this.starLife*(Math.random()*.08+.46),L.strobe=!0,L.strobeFreq=Math.random()*20+40,this.strobeColor&&(L.secondColor=this.strobeColor)),L.onDeath=c,this.glitter&&(L.sparkFreq=a,L.sparkSpeed=l,L.sparkLife=i,L.sparkLifeVariation=u,L.sparkColor=this.glitterColor,L.sparkTimer=Math.random()*L.sparkFreq)};if(typeof this.color=="string")if(this.color==="random"?s=null:s=this.color,this.ring){const n=Math.random()*Math.PI,I=Math.pow(Math.random(),2)*.85+.15;mt(0,R,this.starCount,0,M=>{const L=Math.sin(M)*r*I,G=Math.cos(M)*r,gt=St.pointDist(0,0,L,G),we=St.pointAngle(0,0,L,G)+n,X=D.add(e,o,s,we,gt,this.starLife+Math.random()*this.starLife*this.starLifeVariation);this.glitter&&(X.sparkFreq=a,X.sparkSpeed=l,X.sparkLife=i,X.sparkLifeVariation=u,X.sparkColor=this.glitterColor,X.sparkTimer=Math.random()*X.sparkFreq)})}else Y(this.starCount,b);else if(Array.isArray(this.color))if(Math.random()<.5){const n=Math.random()*Math.PI,I=n+Math.PI,M=Math.PI;s=this.color[0],Y(this.starCount,b,n,M),s=this.color[1],Y(this.starCount,b,I,M)}else s=this.color[0],Y(this.starCount/2,b),s=this.color[1],Y(this.starCount/2,b);else throw new Error("Invalid shell color. Expected string or array of strings, but got: "+this.color);this.pistil&&new _({spreadSize:this.spreadSize*.5,starLife:this.starLife*.6,starLifeVariation:this.starLifeVariation,starDensity:1.4,color:this.pistilColor,glitter:"light",glitterColor:this.pistilColor===C.Gold?C.Gold:C.White}).burst(e,o),this.streamers&&new _({spreadSize:this.spreadSize*.9,starLife:this.starLife*.8,starLifeVariation:this.starLifeVariation,starCount:Math.floor(Math.max(6,this.spreadSize/45)),color:C.White,glitter:"streamer"}).burst(e,o),K.add(e,o,this.spreadSize/4),this.comet&&(Math.random()<.5?p.burst1.play():p.burst2.play())}}const K={active:[],_pool:[],_new(){return{}},add(t,e,o){const r=this._pool.pop()||this._new();return r.x=t,r.y=e,r.radius=o,this.active.push(r),r},returnInstance(t){this._pool.push(t)}};function Pt(){const t={};return lt.forEach(e=>{t[e]=[]}),t}const D={drawWidth:3,airDrag:.98,airDragHeavy:.992,active:Pt(),_pool:[],_new(){return{}},add(t,e,o,r,s,c,a,l){const i=this._pool.pop()||this._new();return i.visible=!0,i.heavy=!1,i.x=t,i.y=e,i.prevX=t,i.prevY=e,i.color=o,i.speedX=Math.sin(r)*s+(a||0),i.speedY=Math.cos(r)*s+(l||0),i.life=c,i.fullLife=c,i.spinAngle=Math.random()*R,i.spinSpeed=.8,i.spinRadius=0,i.sparkFreq=0,i.sparkSpeed=1,i.sparkTimer=0,i.sparkColor=o,i.sparkLife=750,i.sparkLifeVariation=.25,i.strobe=!1,this.active[o].push(i),i},returnInstance(t){t.onDeath&&t.onDeath(t),t.onDeath=null,t.secondColor=null,t.transitionTime=0,t.colorChanged=!1,this._pool.push(t)}},O={drawWidth:0,airDrag:.9,active:Pt(),_pool:[],_new(){return{}},add(t,e,o,r,s,c){const a=this._pool.pop()||this._new();return a.x=t,a.y=e,a.prevX=t,a.prevY=e,a.color=o,a.speedX=Math.sin(r)*s,a.speedY=Math.cos(r)*s,a.life=c,this.active[o].push(a),a},returnInstance(t){this._pool.push(t)}};$t()}),(S,g)=>(xe(),Me("div",Ke,[Le(Fe),Qe]))}}),on=_e($e,[["__scopeId","data-v-2741c89d"]]);export{on as default};
