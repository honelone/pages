import{d as w,j as E,r as n,w as K,o as T,a as v,b as r,F as L,e as M,p as W,q as G,g as c,n as S,K as j,t as A,_ as H}from"./index-COQhxWnb.js";const J={class:"inner-wrapper"},O=["onClick","onContextmenu","onMouseenter"],Q=["onClick"],U=w({__name:"index",setup(X){const u=E([]),_=n(),R=()=>{u.length=0,[[".",".",".","4",".",".",".","3","."],["7",".","4","8",".",".","1",".","2"],[".",".",".","2","3",".","4",".","9"],[".","4",".","5",".","9",".","8","."],["5",".",".",".",".",".","9","1","3"],["1",".",".",".","8",".","2",".","4"],[".",".",".",".",".",".","3","4","5"],[".","5","1","9","4",".","7","2","."],["4","7","3",".","5",".",".","9","1"]].forEach(t=>{u.push(t.map(a=>({value:a=="."?void 0:parseInt(a,10),writable:a==".",duplicate:!1})))})};K(u,()=>{u.forEach((e,t)=>{e.forEach((a,i)=>{if(a.value){const l=a.duplicate,s=!$(t,i,a.value);a.duplicate=s,l!=s&&s&&(_.value.classList="sudoku-list shake",setTimeout(()=>{_.value.classList="sudoku-list"},300))}})})}),T(()=>{R()});const B=()=>{u.length=0;for(let e=0;e<9;e++){u[e]=[];for(let t=0;t<9;t++)u[e][t]={value:void 0,writable:!0,duplicate:!1}}},D=()=>{b(0,0)||alert("无解")};function b(e,t){if(t>=9&&(t=0,e+=1,e>=9))return!0;if(u[e][t].value)return b(e,t+1);for(let a=1;a<=9;a++)if($(e,t,a)){if(u[e][t].value=a,b(e,t+1))return!0;u[e][t].value=void 0}return!1}function $(e,t,a){for(let s=0;s<9;s++)if(s!=t&&u[e][s].value==a)return!1;for(let s=0;s<9;s++)if(s!=e&&u[s][t].value==a)return!1;const i=parseInt(String(e/3))*3,l=parseInt(String(t/3))*3;for(let s=i;s<i+3;s++)for(let o=l;o<l+3;o++)if(!(s==e&&o==t)&&u[s][o].value==a)return!1;return!0}const N=()=>{f.value=void 0,p.value=void 0,k.value=void 0,h.value=void 0,m.value=!1,d.value=void 0},f=n(),p=n(),d=n(),V=(e,t)=>{m.value=!1,f.value!==e||p.value!==t?(f.value=e,p.value=t,d.value=u[e][t].value):(f.value=void 0,p.value=void 0,d.value=void 0)},k=n(),h=n(),m=n(!1),C=E({left:0,top:0}),z=(e,t,a)=>{var i;t==k.value&&a==h.value||(i=u[t][a])!=null&&i.writable&&(m.value=!0,k.value=t,h.value=a,C.left=e.x,C.top=e.y)},F=e=>{u[k.value][h.value].value=e,m.value=!1,k.value=void 0,h.value=void 0},g=n(),y=n(),P=(e,t)=>{g.value=e,y.value=t},q=()=>{g.value=void 0,y.value=void 0};return(e,t)=>(c(),v("div",{class:"sudoku-container",onClick:N},[r("div",J,[r("div",{class:"sudoku-list",ref_key:"sudokuRef",ref:_},[(c(!0),v(L,null,M(u,(a,i)=>(c(),v("div",{key:i,class:S(["sudoku-row",{active:i==f.value,hoverActive:i==g.value}])},[(c(!0),v(L,null,M(a,(l,s)=>(c(),v("div",{key:`${i}-${s}`,class:S(["sudoku-item",{hoverActive:s==y.value,active:s==p.value,numActive:d.value&&d.value==l.value,duplicate:l.duplicate,writable:l.writable}]),onClick:j(o=>V(i,s),["left","stop"]),onContextmenu:j(o=>z(o,i,s),["right","stop","prevent"]),onMouseenter:o=>P(i,s),onMouseleave:q},A(l.value),43,O))),128))],2))),128))],512)]),r("div",{class:"btn-wrapper"},[r("div",{class:"btn",onClick:R},"生成"),r("div",{class:"btn",onClick:B},"重置"),r("div",{class:"btn",onClick:D},"解答")]),m.value?(c(),v("div",{key:0,class:"wait-popover",style:W({left:`${C.left}px`,top:`${C.top}px`})},[(c(),v(L,null,M(9,a=>r("div",{key:a,class:"wait-item",onClick:i=>F(a)},A(a),9,Q)),64))],4)):G("",!0)]))}}),Z=H(U,[["__scopeId","data-v-f36bfee4"]]);export{Z as default};
