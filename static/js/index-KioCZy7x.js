import{d as S,j as L,r as M,c as T,J as j,o as E,a as _,b as l,t as x,F as k,e as v,f as g,n as I,_ as P}from"./index-ChyOBwE9.js";const R={class:"wrapper-2048"},C={class:"inner-wrapper"},A={class:"score"},D={class:"box"},a=4,n=4,F=S({__name:"index",setup(G){const o=L([[]]),c=M(),N=()=>{for(let t=0;t<a;t++){o[t]=[];for(let s=0;s<n;s++)o[t][s]=0}},w=T(()=>{const t=localStorage.getItem("2048");let s=0;return t?s=Math.max(...o.flat(),parseInt(t,10)):s=Math.max(...o.flat()),localStorage.setItem("2048",s.toString()),s});j(()=>{N(),h()}),E(()=>{window.addEventListener("keydown",t=>{t.key==="ArrowLeft"&&(c.value="LEFT",f()),t.key==="ArrowRight"&&(c.value="RIGHT",f()),t.key==="ArrowUp"&&(c.value="UP",f()),t.key==="ArrowDown"&&(c.value="DOWN",f())})});const f=()=>{const t=JSON.parse(JSON.stringify(o));switch(c.value){case"LEFT":for(let e=0;e<a;e++)i(e,0);break;case"RIGHT":for(let e=0;e<a;e++)i(e,n-1);break;case"UP":for(let e=0;e<n;e++)i(0,e);break;case"DOWN":for(let e=0;e<n;e++)i(a-1,e);break}JSON.stringify(t)!==JSON.stringify(o)&&h()},p=(t,s)=>{const e={i:t,j:s};switch(c.value){case"LEFT":e.j++;break;case"RIGHT":e.j--;break;case"UP":e.i++;break;case"DOWN":e.i--;break}return y(e.i,e.j)?e:null},m=(t,s)=>{const e=p(t,s);return e?o[e.i][e.j]==0?m(e.i,e.j):e:null},i=(t,s)=>{const e=m(t,s);if(e){o[t][s]==0?(o[t][s]=o[e.i][e.j],o[e.i][e.j]=0):o[t][s]==o[e.i][e.j]&&(o[t][s]=o[t][s]*2,o[e.i][e.j]=0);const r=p(t,s);if(r)i(r.i,r.j);else return null}else return null},h=()=>{const t=[];for(let u=0;u<a;u++)for(let d=0;d<n;d++)o[u][d]==0&&t.push([u,d]);if(t.length==0)return;const s=Math.floor(Math.random()*t.length),[e,r]=t[s],O=Math.random()<.5?2:4;o[e][r]=O},y=(t,s)=>t>=0&&t<a&&s>=0&&s<n,b=(t,s)=>{const e=o[t-1][s-1];return e==0?"":`color-${e}`};return(t,s)=>(g(),_("div",R,[l("div",C,[l("div",A,"最高分："+x(w.value),1),l("div",D,[(g(),_(k,null,v(a,e=>l("div",{class:"row",key:e},[(g(),_(k,null,v(n,r=>l("div",{class:"col",key:r},[l("div",{class:I(["cell",b(e,r)])},x(o[e-1][r-1]),3)])),64))])),64))])])]))}}),J=P(F,[["__scopeId","data-v-e8dc1925"]]);export{J as default};
