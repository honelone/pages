import{d as he,r as Tt,c as ce,o as le,A as ue,B as de,a as X,F as Rt,e as Ot,f as Z,_ as _e}from"./index-DxAQDDcl.js";import{g as fe,c as ge}from"./commonjsHelpers-Cpj98o6Y.js";var dt,_t,ft;const q=typeof window>"u"?global:window,jt=q.performance&&(()=>q.performance.now())||(()=>Date.now()),gt=((dt=q.requestAnimationFrame)===null||dt===void 0?void 0:dt.bind(q))||(i=>setTimeout(()=>i(jt()),1e3/60)),At=((_t=q.cancelAnimationFrame)===null||_t===void 0?void 0:_t.bind(q))||clearTimeout;function it(i){return i[i.length-1]}const yt=(i,t)=>i<0?t+i:i,pe=(i,t)=>i[yt(t,i.length)];function Vt(i,t){const e={...i};for(const r in t){const s=i[r],n=t[r];s!==n&&(s&&n&&typeof s=="object"&&typeof n=="object"&&!Array.isArray(n)?e[r]=Vt(s,n):e[r]=n)}return e}function me(i,t){const e=i.split("."),r={};let s=r;for(let n=0;n<e.length;n++){const a=n===e.length-1?t:{};s[e[n]]=a,s=a}return r}let bt=0;function Yt(){return bt++,bt}function rt(i){return i.reduce((e,r)=>r+e,0)/i.length}function A(i){const t=i.toUpperCase().trim();if(/^#([A-F0-9]{3}){1,2}$/.test(t)){let r=t.substring(1).split("");r.length===3&&(r=[r[0],r[0],r[1],r[1],r[2],r[2]]);const s=`${r.join("")}`;return{r:parseInt(s.slice(0,2),16),g:parseInt(s.slice(2,4),16),b:parseInt(s.slice(4,6),16),a:1}}const e=t.match(/^RGBA?\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d*\.?\d+))?\)$/);if(e)return{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10),a:parseFloat(e[4]||1,10)};throw new Error(`Invalid color: ${i}`)}const ke=i=>i.replace(/^\s+/,"").replace(/\s+$/,"");function ct(i,t){const e={};for(let r=0;r<t;r++)e[r]=i;return e}function ve(i,t){const e={};for(let r=0;r<i;r++)e[r]=t(r);return e}const pt=((ft=q.navigator)===null||ft===void 0?void 0:ft.userAgent)||"",Se=pt.indexOf("MSIE ")>0||pt.indexOf("Trident/")>0||pt.indexOf("Edge/")>0,Nt=()=>{};class ye{constructor(t,e,r=Nt){this._mutationChains=[],this._onStateChange=r,this.state={options:{drawingFadeDuration:e.drawingFadeDuration,drawingWidth:e.drawingWidth,drawingColor:A(e.drawingColor),strokeColor:A(e.strokeColor),outlineColor:A(e.outlineColor),radicalColor:A(e.radicalColor||e.strokeColor),highlightColor:A(e.highlightColor)},character:{main:{opacity:e.showCharacter?1:0,strokes:{}},outline:{opacity:e.showOutline?1:0,strokes:{}},highlight:{opacity:1,strokes:{}}},userStrokes:null};for(let s=0;s<t.strokes.length;s++)this.state.character.main.strokes[s]={opacity:1,displayPortion:1},this.state.character.outline.strokes[s]={opacity:1,displayPortion:1},this.state.character.highlight.strokes[s]={opacity:0,displayPortion:1}}overwriteOnStateChange(t){this._onStateChange=t}updateState(t){const e=Vt(this.state,t);this._onStateChange(e,this.state),this.state=e}run(t,e={}){const r=t.map(s=>s.scope);return this.cancelMutations(r),new Promise(s=>{const n={_isActive:!0,_index:0,_resolve:s,_mutations:t,_loop:e.loop,_scopes:r};this._mutationChains.push(n),this._run(n)})}_run(t){if(!t._isActive)return;const e=t._mutations;if(t._index>=e.length)if(t._loop)t._index=0;else{t._isActive=!1,this._mutationChains=this._mutationChains.filter(s=>s!==t),t._resolve({canceled:!1});return}t._mutations[t._index].run(this).then(()=>{t._isActive&&(t._index++,this._run(t))})}_getActiveMutations(){return this._mutationChains.map(t=>t._mutations[t._index])}pauseAll(){this._getActiveMutations().forEach(t=>t.pause())}resumeAll(){this._getActiveMutations().forEach(t=>t.resume())}cancelMutations(t){for(const e of this._mutationChains)for(const r of e._scopes)for(const s of t)(r.startsWith(s)||s.startsWith(r))&&this._cancelMutationChain(e)}cancelAll(){this.cancelMutations([""])}_cancelMutationChain(t){var e;t._isActive=!1;for(let r=t._index;r<t._mutations.length;r++)t._mutations[r].cancel(this);(e=t._resolve)===null||e===void 0||e.call(t,{canceled:!0}),this._mutationChains=this._mutationChains.filter(r=>r!==t)}}const U=(i,t)=>({x:i.x-t.x,y:i.y-t.y}),nt=i=>Math.sqrt(Math.pow(i.x,2)+Math.pow(i.y,2)),O=(i,t)=>nt(U(i,t)),we=(i,t)=>i.x===t.x&&i.y===t.y,vt=(i,t=1)=>{const e=t*10;return{x:Math.round(e*i.x)/e,y:Math.round(e*i.y)/e}},wt=i=>{let t=i[0];return i.slice(1).reduce((r,s)=>{const n=O(s,t);return t=s,r+n},0)},Ce=(i,t)=>(i.x*t.x+i.y*t.y)/nt(i)/nt(t),Ct=(i,t,e)=>{const r=U(t,i),s=e/nt(r);return{x:t.x+s*r.x,y:t.y+s*r.y}},$e=(i,t)=>{const e=i.length>=t.length?i:t,r=i.length>=t.length?t:i,s=(a,o,h,d)=>{if(a===0&&o===0)return O(e[0],r[0]);if(a>0&&o===0)return Math.max(h[0],O(e[a],r[0]));const k=d[d.length-1];return a===0&&o>0?Math.max(k,O(e[0],r[o])):Math.max(Math.min(h[o],h[o-1],k),O(e[a],r[o]))};let n=[];for(let a=0;a<e.length;a++){const o=[];for(let h=0;h<r.length;h++)o.push(s(a,h,n,o));n=o}return n[r.length-1]},De=(i,t=.05)=>{const e=i.slice(0,1);for(const r of i.slice(1)){const s=e[e.length-1],n=O(r,s);if(n>t){const a=Math.ceil(n/t),o=n/a;for(let h=0;h<a;h++)e.push(Ct(r,s,-1*o*(h+1)))}else e.push(r)}return e},Pe=(i,t=30)=>{const r=wt(i)/(t-1),s=[i[0]],n=it(i),a=i.slice(1);for(let o=0;o<t-2;o++){let h=it(s),d=r,k=!1;for(;!k;){const f=O(h,a[0]);if(f<d)d-=f,h=a.shift();else{const $=Ct(h,a[0],d-f);s.push($),k=!0}}}return s.push(n),s},Lt=i=>{const t=Pe(i),e=rt(t.map(h=>h.x)),r=rt(t.map(h=>h.y)),s={x:e,y:r},n=t.map(h=>U(h,s)),a=Math.sqrt(rt([Math.pow(n[0].x,2)+Math.pow(n[0].y,2),Math.pow(it(n).x,2)+Math.pow(it(n).y,2)])),o=n.map(h=>({x:h.x/a,y:h.y/a}));return De(o)},Me=(i,t)=>i.map(e=>({x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y})),xe=i=>{if(i.length<3)return i;const t=[i[0],i[1]];return i.slice(2).forEach(e=>{const r=t.length,s=U(e,t[r-1]),n=U(t[r-1],t[r-2]);s.y*n.x-s.x*n.y===0&&t.pop(),t.push(e)}),t};function $t(i,t=!1){const e=vt(i[0]),r=i.slice(1);let s=`M ${e.x} ${e.y}`;return r.forEach(n=>{const a=vt(n);s+=` L ${a.x} ${a.y}`}),t&&(s+="Z"),s}const Qt=(i,t)=>{const e=xe(i);if(e.length<2)return e;const r=e[1],s=e[0],n=Ct(r,s,t),a=e.slice(1);return a.unshift(n),a};class Te{constructor(t,e,r,s=!1){this.path=t,this.points=e,this.strokeNum=r,this.isInRadical=s}getStartingPoint(){return this.points[0]}getEndingPoint(){return this.points[this.points.length-1]}getLength(){return wt(this.points)}getVectors(){let t=this.points[0];return this.points.slice(1).map(r=>{const s=U(r,t);return t=r,s})}getDistance(t){const e=this.points.map(r=>O(r,t));return Math.min(...e)}getAverageDistance(t){return t.reduce((r,s)=>r+this.getDistance(s),0)/t.length}}class Re{constructor(t,e){this.symbol=t,this.strokes=e}}function Oe({radStrokes:i,strokes:t,medians:e}){const r=s=>{var n;return((n=i==null?void 0:i.indexOf(s))!==null&&n!==void 0?n:-1)>=0};return t.map((s,n)=>{const a=e[n].map(o=>{const[h,d]=o;return{x:h,y:d}});return new Te(s,a,n,r(n))})}function Ae(i,t){const e=Oe(t);return new Re(i,e)}const be=[{x:0,y:-124},{x:1024,y:900}],[ot,Gt]=be,Et=Gt.x-ot.x,It=Gt.y-ot.y;class Ht{constructor(t){const{padding:e,width:r,height:s}=t;this.padding=e,this.width=r,this.height=s;const n=r-2*e,a=s-2*e,o=n/Et,h=a/It;this.scale=Math.min(o,h);const d=e+(n-this.scale*Et)/2,k=e+(a-this.scale*It)/2;this.xOffset=-1*ot.x*this.scale+d,this.yOffset=-1*ot.y*this.scale+k}convertExternalPoint(t){const e=(t.x-this.xOffset)/this.scale,r=(this.height-this.yOffset-t.y)/this.scale;return{x:e,y:r}}}const Le=0,Ft=250,Ee=.4,Ie=.35;function He(i,t,e,r={}){const s=t.strokes,n=qe(i.points);if(n.length<2)return{isMatch:!1,meta:{isStrokeBackwards:!1}};const{isMatch:a,meta:o,avgDist:h}=st(n,s[e],r);if(!a)return{isMatch:a,meta:o};const d=s.slice(e+1);let k=h;for(let f=0;f<d.length;f++){const{isMatch:$,avgDist:S}=st(n,d[f],{...r,checkBackwards:!1});$&&S<k&&(k=S)}if(k<h){const f=.6*(k+h)/(2*h),{isMatch:$,meta:S}=st(n,s[e],{...r,leniency:(r.leniency||1)*f});return{isMatch:$,meta:S}}return{isMatch:a,meta:o}}const Fe=(i,t,e)=>{const r=O(t.getStartingPoint(),i[0]),s=O(t.getEndingPoint(),i[i.length-1]);return r<=Ft*e&&s<=Ft*e},ze=i=>{const t=[];let e=i[0];return i.slice(1).forEach(r=>{t.push(U(r,e)),e=r}),t},We=(i,t)=>{const e=ze(i),r=t.getVectors(),s=e.map(a=>{const o=r.map(h=>Ce(h,a));return Math.max(...o)});return rt(s)>Le},Be=(i,t,e)=>e*(wt(i)+25)/(t.getLength()+25)>=Ie,qe=i=>{if(i.length<2)return i;const[t,...e]=i,r=[t];for(const s of e)we(s,r[r.length-1])||r.push(s);return r},Ue=[Math.PI/16,Math.PI/32,0,-1*Math.PI/32,-1*Math.PI/16],je=(i,t,e)=>{const r=Lt(i),s=Lt(t);let n=1/0;return Ue.forEach(a=>{const o=$e(r,Me(s,a));o<n&&(n=o)}),n<=Ee*e},st=(i,t,e)=>{const{leniency:r=1,isOutlineVisible:s=!1,checkBackwards:n=!0,averageDistanceThreshold:a=350}=e,o=t.getAverageDistance(i),h=s||t.strokeNum>0?.5:1,d=o<=a*h*r;if(!d)return{isMatch:!1,avgDist:o,meta:{isStrokeBackwards:!1}};const k=Fe(i,t,r),f=We(i,t),$=je(i,t.points,r),S=Be(i,t,r),M=d&&k&&f&&$&&S;return n&&!M&&st([...i].reverse(),t,{...e,checkBackwards:!1}).isMatch?{isMatch:M,avgDist:o,meta:{isStrokeBackwards:!0}}:{isMatch:M,avgDist:o,meta:{isStrokeBackwards:!1}}};class Ve{constructor(t,e,r){this.id=t,this.points=[e],this.externalPoints=[r]}appendPoint(t,e){this.points.push(t),this.externalPoints.push(e)}}class Ye{constructor(t){this._duration=t,this._startTime=null,this._paused=!1,this.scope=`delay.${t}`}run(){return this._startTime=jt(),this._runningPromise=new Promise(t=>{this._resolve=t,this._timeout=setTimeout(()=>this.cancel(),this._duration)}),this._runningPromise}pause(){if(this._paused)return;const t=performance.now()-(this._startTime||0);this._duration=Math.max(0,this._duration-t),clearTimeout(this._timeout),this._paused=!0}resume(){this._paused&&(this._startTime=performance.now(),this._timeout=setTimeout(()=>this.cancel(),this._duration),this._paused=!1)}cancel(){clearTimeout(this._timeout),this._resolve&&this._resolve(),this._resolve=void 0}}class w{constructor(t,e,r={}){this._tick=s=>{if(this._startPauseTime!==null)return;const n=Math.min(1,(s-this._startTime-this._pausedDuration)/this._duration);if(n===1)this._renderState.updateState(this._values),this._frameHandle=void 0,this.cancel(this._renderState);else{const a=Ne(n),o=Jt(this._startState,this._values,a);this._renderState.updateState(o),this._frameHandle=gt(this._tick)}},this.scope=t,this._valuesOrCallable=e,this._duration=r.duration||0,this._force=r.force,this._pausedDuration=0,this._startPauseTime=null}run(t){return this._values||this._inflateValues(t),this._duration===0&&t.updateState(this._values),this._duration===0||Xt(t.state,this._values)?Promise.resolve():(this._renderState=t,this._startState=t.state,this._startTime=performance.now(),this._frameHandle=gt(this._tick),new Promise(e=>{this._resolve=e}))}_inflateValues(t){let e=this._valuesOrCallable;typeof this._valuesOrCallable=="function"&&(e=this._valuesOrCallable(t.state)),this._values=me(this.scope,e)}pause(){this._startPauseTime===null&&(this._frameHandle&&At(this._frameHandle),this._startPauseTime=performance.now())}resume(){this._startPauseTime!==null&&(this._frameHandle=gt(this._tick),this._pausedDuration+=performance.now()-this._startPauseTime,this._startPauseTime=null)}cancel(t){var e;(e=this._resolve)===null||e===void 0||e.call(this),this._resolve=void 0,At(this._frameHandle||-1),this._frameHandle=void 0,this._force&&(this._values||this._inflateValues(t),t.updateState(this._values))}}w.Delay=Ye;function Jt(i,t,e){const r={};for(const s in t){const n=t[s],a=i==null?void 0:i[s];typeof a=="number"&&typeof n=="number"&&n>=0?r[s]=e*(n-a)+a:r[s]=Jt(a,n,e)}return r}function Xt(i,t){for(const e in t){const r=t[e],s=i==null?void 0:i[e];if(r>=0){if(r!==s)return!1}else if(!Xt(s,r))return!1}return!0}const Ne=i=>-Math.cos(i*Math.PI)/2+.5,Zt=(i,t,e)=>[new w(`character.${i}.strokes`,ct({opacity:1,displayPortion:1},t.strokes.length),{duration:e,force:!0})],St=(i,t,e)=>[new w(`character.${i}`,{opacity:1,strokes:ct({opacity:1,displayPortion:1},t.strokes.length)},{duration:e,force:!0})],Y=(i,t,e)=>[new w(`character.${i}.opacity`,0,{duration:e,force:!0}),...Zt(i,t,0)],zt=(i,t,e)=>[new w(`options.${i}`,t,{duration:e})],Kt=(i,t,e)=>{const r=i.strokeNum,s=(i.getLength()+600)/(3*e);return[new w("options.highlightColor",t),new w("character.highlight",{opacity:1,strokes:{[r]:{displayPortion:0,opacity:0}}}),new w(`character.highlight.strokes.${r}`,{displayPortion:1,opacity:1},{duration:s}),new w(`character.highlight.strokes.${r}.opacity`,0,{duration:s,force:!0})]},te=(i,t,e)=>{const r=t.strokeNum,s=(t.getLength()+600)/(3*e);return[new w(`character.${i}`,{opacity:1,strokes:{[r]:{displayPortion:0,opacity:1}}}),new w(`character.${i}.strokes.${r}.displayPortion`,1,{duration:s})]},Qe=(i,t,e,r)=>{const s=a=>{const o=a.character[i],h={opacity:1,strokes:{}};for(let d=0;d<t.strokes.length;d++)h.strokes[d]={opacity:o.opacity*o.strokes[d].opacity};return h},n=t.strokes[e];return[new w(`character.${i}`,s),...te(i,n,r)]},Ge=(i,t,e)=>[new w(`character.${i}.strokes.${t}`,{displayPortion:1,opacity:1},{duration:e,force:!0})],ee=(i,t,e,r,s)=>{let n=Y(i,t,e);return n=n.concat(Zt(i,t,0)),n.push(new w(`character.${i}`,{opacity:1,strokes:ct({opacity:0},t.strokes.length)},{force:!0})),t.strokes.forEach((a,o)=>{o>0&&n.push(new w.Delay(s)),n=n.concat(te(i,a,r))}),n},Je=(i,t,e,r,s,n)=>{const a=ee(i,t,e,r,s);return a.push(new w.Delay(n)),a},Xe=(i,t,e)=>[...Y("main",i,t),new w("character.highlight",{opacity:1,strokes:ct({opacity:0},i.strokes.length)},{force:!0}),new w("character.main",{opacity:1,strokes:ve(i.strokes.length,r=>({opacity:r<e?1:0}))},{force:!0})],Ze=(i,t)=>[new w("quiz.activeUserStrokeId",i,{force:!0}),new w(`userStrokes.${i}`,{points:[t],opacity:1},{force:!0})],Ke=(i,t)=>[new w(`userStrokes.${i}.points`,t,{force:!0})],tr=(i,t)=>[new w(`userStrokes.${i}.opacity`,0,{duration:t})],Wt=i=>(i==null?void 0:i.map(t=>new w(`userStrokes.${t}`,null,{force:!0})))||[],er=(i,t,e)=>[new w("options.highlightColor",t),...Y("highlight",i),...St("highlight",i,e/2),...Y("highlight",i,e/2)],rr=i=>({pathString:$t(i.externalPoints),points:i.points.map(t=>vt(t))});class sr{constructor(t,e,r){this._currentStrokeIndex=0,this._mistakesOnStroke=0,this._totalMistakes=0,this._character=t,this._renderState=e,this._isActive=!1,this._positioner=r}startQuiz(t){this._userStrokesIds&&this._renderState.run(Wt(this._userStrokesIds)),this._userStrokesIds=[],this._isActive=!0,this._options=t;const e=yt(t.quizStartStrokeNum,this._character.strokes.length);return this._currentStrokeIndex=Math.min(e,this._character.strokes.length-1),this._mistakesOnStroke=0,this._totalMistakes=0,this._renderState.run(Xe(this._character,t.strokeFadeDuration,this._currentStrokeIndex))}startUserStroke(t){var e;if(!this._isActive)return null;if(this._userStroke)return this.endUserStroke();const r=this._positioner.convertExternalPoint(t),s=Yt();return this._userStroke=new Ve(s,r,t),(e=this._userStrokesIds)===null||e===void 0||e.push(s),this._renderState.run(Ze(s,r))}continueUserStroke(t){if(!this._userStroke)return Promise.resolve();const e=this._positioner.convertExternalPoint(t);this._userStroke.appendPoint(e,t);const r=this._userStroke.points.slice(0);return this._renderState.run(Ke(this._userStroke.id,r))}setPositioner(t){this._positioner=t}endUserStroke(){var t;if(!this._userStroke)return;if(this._renderState.run(tr(this._userStroke.id,(t=this._options.drawingFadeDuration)!==null&&t!==void 0?t:300)),this._userStroke.points.length===1){this._userStroke=void 0;return}const{acceptBackwardsStrokes:e,markStrokeCorrectAfterMisses:r}=this._options,s=this._getCurrentStroke(),{isMatch:n,meta:a}=He(this._userStroke,this._character,this._currentStrokeIndex,{isOutlineVisible:this._renderState.state.character.outline.opacity>0,leniency:this._options.leniency,averageDistanceThreshold:this._options.averageDistanceThreshold}),o=r&&this._mistakesOnStroke+1>=r;if(n||o||a.isStrokeBackwards&&e)this._handleSuccess(a);else{this._handleFailure(a);const{showHintAfterMisses:d,highlightColor:k,strokeHighlightSpeed:f}=this._options;d!==!1&&this._mistakesOnStroke>=d&&this._renderState.run(Kt(s,A(k),f))}this._userStroke=void 0}cancel(){this._isActive=!1,this._userStrokesIds&&this._renderState.run(Wt(this._userStrokesIds))}_getStrokeData({isCorrect:t,meta:e}){return{character:this._character.symbol,strokeNum:this._currentStrokeIndex,mistakesOnStroke:this._mistakesOnStroke,totalMistakes:this._totalMistakes,strokesRemaining:this._character.strokes.length-this._currentStrokeIndex-(t?1:0),drawnPath:rr(this._userStroke),isBackwards:e.isStrokeBackwards}}nextStroke(){if(!this._options)return;const{strokes:t,symbol:e}=this._character,{onComplete:r,highlightOnComplete:s,strokeFadeDuration:n,highlightCompleteColor:a,highlightColor:o,strokeHighlightDuration:h}=this._options;let d=Ge("main",this._currentStrokeIndex,n);this._mistakesOnStroke=0,this._currentStrokeIndex+=1,this._currentStrokeIndex===t.length&&(this._isActive=!1,r==null||r({character:e,totalMistakes:this._totalMistakes}),s&&(d=d.concat(er(this._character,A(a||o),(h||0)*2)))),this._renderState.run(d)}_handleSuccess(t){if(!this._options)return;const{onCorrectStroke:e}=this._options;e==null||e({...this._getStrokeData({isCorrect:!0,meta:t})}),this.nextStroke()}_handleFailure(t){var e,r;this._mistakesOnStroke+=1,this._totalMistakes+=1,(e=(r=this._options).onMistake)===null||e===void 0||e.call(r,this._getStrokeData({isCorrect:!1,meta:t}))}_getCurrentStroke(){return this._character.strokes[this._currentStrokeIndex]}}function W(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function L(i,t,e){i.setAttributeNS(null,t,e)}function at(i,t){Object.keys(t).forEach(e=>L(i,e,t[e]))}function ir(i){let t="";return window.location&&window.location.href&&(t=window.location.href.replace(/#[^#]*$/,"").replace(/"/gi,"%22")),`url("${t}#${i}")`}function re(i){var t;i==null||(t=i.parentNode)===null||t===void 0||t.removeChild(i)}class B{constructor(t){this.stroke=t,this._pathLength=t.getLength()+B.STROKE_WIDTH/2}_getStrokeDashoffset(t){return this._pathLength*.999*(1-t)}_getColor({strokeColor:t,radicalColor:e}){return e&&this.stroke.isInRadical?e:t}}B.STROKE_WIDTH=200;const Bt=200;class nr extends B{constructor(t){super(t),this._oldProps=void 0}mount(t){this._animationPath=W("path"),this._clip=W("clipPath"),this._strokePath=W("path");const e=`mask-${Yt()}`;L(this._clip,"id",e),L(this._strokePath,"d",this.stroke.path),this._animationPath.style.opacity="0",L(this._animationPath,"clip-path",ir(e));const r=Qt(this.stroke.points,Bt/2);return L(this._animationPath,"d",$t(r)),at(this._animationPath,{stroke:"#FFFFFF","stroke-width":Bt.toString(),fill:"none","stroke-linecap":"round","stroke-linejoin":"miter","stroke-dasharray":`${this._pathLength},${this._pathLength}`}),this._clip.appendChild(this._strokePath),t.defs.appendChild(this._clip),t.svg.appendChild(this._animationPath),this}render(t){var e,r;if(t===this._oldProps||!this._animationPath)return;t.displayPortion!==((e=this._oldProps)===null||e===void 0?void 0:e.displayPortion)&&(this._animationPath.style.strokeDashoffset=this._getStrokeDashoffset(t.displayPortion).toString());const s=this._getColor(t);if(!this._oldProps||s!==this._getColor(this._oldProps)){const{r:n,g:a,b:o,a:h}=s;at(this._animationPath,{stroke:`rgba(${n},${a},${o},${h})`})}t.opacity!==((r=this._oldProps)===null||r===void 0?void 0:r.opacity)&&(this._animationPath.style.opacity=t.opacity.toString()),this._oldProps=t}}class mt{constructor(t){this._oldProps=void 0,this._strokeRenderers=t.strokes.map(e=>new nr(e))}mount(t){const e=t.createSubRenderTarget();this._group=e.svg,this._strokeRenderers.forEach(r=>{r.mount(e)})}render(t){var e,r;if(t===this._oldProps||!this._group)return;const{opacity:s,strokes:n,strokeColor:a,radicalColor:o=null}=t;if(s!==((e=this._oldProps)===null||e===void 0?void 0:e.opacity)&&(this._group.style.opacity=s.toString(),!Se)){var h;s===0?this._group.style.display="none":((h=this._oldProps)===null||h===void 0?void 0:h.opacity)===0&&this._group.style.removeProperty("display")}const d=!this._oldProps||a!==this._oldProps.strokeColor||o!==this._oldProps.radicalColor;if(d||n!==((r=this._oldProps)===null||r===void 0?void 0:r.strokes))for(let f=0;f<this._strokeRenderers.length;f++){var k;!d&&(k=this._oldProps)!==null&&k!==void 0&&k.strokes&&n[f]===this._oldProps.strokes[f]||this._strokeRenderers[f].render({strokeColor:a,radicalColor:o,opacity:n[f].opacity,displayPortion:n[f].displayPortion})}this._oldProps=t}}class or{constructor(){this._oldProps=void 0}mount(t){this._path=W("path"),t.svg.appendChild(this._path)}render(t){var e,r,s,n;if(!(!this._path||t===this._oldProps)){if(t.strokeColor!==((e=this._oldProps)===null||e===void 0?void 0:e.strokeColor)||t.strokeWidth!==((r=this._oldProps)===null||r===void 0?void 0:r.strokeWidth)){const{r:a,g:o,b:h,a:d}=t.strokeColor;at(this._path,{fill:"none",stroke:`rgba(${a},${o},${h},${d})`,"stroke-width":t.strokeWidth.toString(),"stroke-linecap":"round","stroke-linejoin":"round"})}t.opacity!==((s=this._oldProps)===null||s===void 0?void 0:s.opacity)&&L(this._path,"opacity",t.opacity.toString()),t.points!==((n=this._oldProps)===null||n===void 0?void 0:n.points)&&L(this._path,"d",$t(t.points)),this._oldProps=t}}destroy(){re(this._path)}}class ar{constructor(t,e){this._character=t,this._positioner=e,this._mainCharRenderer=new mt(t),this._outlineCharRenderer=new mt(t),this._highlightCharRenderer=new mt(t),this._userStrokeRenderers={}}mount(t){const e=t.createSubRenderTarget(),r=e.svg,{xOffset:s,yOffset:n,height:a,scale:o}=this._positioner;L(r,"transform",`translate(${s}, ${a-n}) scale(${o}, ${-1*o})`),this._outlineCharRenderer.mount(e),this._mainCharRenderer.mount(e),this._highlightCharRenderer.mount(e),this._positionedTarget=e}render(t){const{main:e,outline:r,highlight:s}=t.character,{outlineColor:n,radicalColor:a,highlightColor:o,strokeColor:h,drawingWidth:d,drawingColor:k}=t.options;this._outlineCharRenderer.render({opacity:r.opacity,strokes:r.strokes,strokeColor:n}),this._mainCharRenderer.render({opacity:e.opacity,strokes:e.strokes,strokeColor:h,radicalColor:a}),this._highlightCharRenderer.render({opacity:s.opacity,strokes:s.strokes,strokeColor:o});const f=t.userStrokes||{};for(const S in this._userStrokeRenderers)if(!f[S]){var $;($=this._userStrokeRenderers[S])===null||$===void 0||$.destroy(),delete this._userStrokeRenderers[S]}for(const S in f){const M=f[S];if(!M)continue;const I={strokeWidth:d,strokeColor:k,...M};(()=>{if(this._userStrokeRenderers[S])return this._userStrokeRenderers[S];const N=new or;return N.mount(this._positionedTarget),this._userStrokeRenderers[S]=N,N})().render(I)}}destroy(){re(this._positionedTarget.svg),this._positionedTarget.defs.innerHTML=""}}class se{constructor(t){this.node=t}addPointerStartListener(t){this.node.addEventListener("mousedown",e=>{t(this._eventify(e,this._getMousePoint))}),this.node.addEventListener("touchstart",e=>{t(this._eventify(e,this._getTouchPoint))})}addPointerMoveListener(t){this.node.addEventListener("mousemove",e=>{t(this._eventify(e,this._getMousePoint))}),this.node.addEventListener("touchmove",e=>{t(this._eventify(e,this._getTouchPoint))})}addPointerEndListener(t){document.addEventListener("mouseup",t),document.addEventListener("touchend",t)}getBoundingClientRect(){return this.node.getBoundingClientRect()}updateDimensions(t,e){this.node.setAttribute("width",`${t}`),this.node.setAttribute("height",`${e}`)}_eventify(t,e){return{getPoint:()=>e.call(this,t),preventDefault:()=>t.preventDefault()}}_getMousePoint(t){const{left:e,top:r}=this.getBoundingClientRect(),s=t.clientX-e,n=t.clientY-r;return{x:s,y:n}}_getTouchPoint(t){const{left:e,top:r}=this.getBoundingClientRect(),s=t.touches[0].clientX-e,n=t.touches[0].clientY-r;return{x:s,y:n}}}class ht extends se{constructor(t,e){super(t),this.svg=t,this.defs=e,"createSVGPoint"in t&&(this._pt=t.createSVGPoint())}static init(t,e="100%",r="100%"){const s=typeof t=="string"?document.getElementById(t):t;if(!s)throw new Error(`HanziWriter target element not found: ${t}`);const n=s.nodeName.toUpperCase(),a=(()=>{if(n==="SVG"||n==="G")return s;{const h=W("svg");return s.appendChild(h),h}})();at(a,{width:e,height:r});const o=W("defs");return a.appendChild(o),new ht(a,o)}createSubRenderTarget(){const t=W("g");return this.svg.appendChild(t),new ht(t,this.defs)}_getMousePoint(t){if(this._pt&&(this._pt.x=t.clientX,this._pt.y=t.clientY,"getScreenCTM"in this.node)){var e;const r=this._pt.matrixTransform((e=this.node.getScreenCTM())===null||e===void 0?void 0:e.inverse());return{x:r.x,y:r.y}}return super._getMousePoint.call(this,t)}_getTouchPoint(t){if(this._pt&&(this._pt.x=t.touches[0].clientX,this._pt.y=t.touches[0].clientY,"getScreenCTM"in this.node)){var e;const r=this._pt.matrixTransform((e=this.node.getScreenCTM())===null||e===void 0?void 0:e.inverse());return{x:r.x,y:r.y}}return super._getTouchPoint(t)}}var hr={HanziWriterRenderer:ar,createRenderTarget:ht.init};const ie=(i,t)=>{i.beginPath();const e=t[0],r=t.slice(1);i.moveTo(e.x,e.y);for(const s of r)i.lineTo(s.x,s.y);i.stroke()},cr=i=>{const t=i.split(/(^|\s+)(?=[A-Z])/).filter(r=>r!==" "),e=[r=>r.beginPath()];for(const r of t){const[s,...n]=r.split(/\s+/),a=n.map(o=>parseFloat(o));s==="M"?e.push(o=>o.moveTo(...a)):s==="L"?e.push(o=>o.lineTo(...a)):s==="C"?e.push(o=>o.bezierCurveTo(...a)):s==="Q"&&e.push(o=>o.quadraticCurveTo(...a))}return r=>e.forEach(s=>s(r))};class lr extends B{constructor(t,e=!0){super(t),e&&Path2D?this._path2D=new Path2D(this.stroke.path):this._pathCmd=cr(this.stroke.path),this._extendedMaskPoints=Qt(this.stroke.points,B.STROKE_WIDTH/2)}render(t,e){if(e.opacity<.05)return;if(t.save(),this._path2D)t.clip(this._path2D);else{var r;(r=this._pathCmd)===null||r===void 0||r.call(this,t),t.globalAlpha=0,t.stroke(),t.clip()}const{r:s,g:n,b:a,a:o}=this._getColor(e),h=o===1?`rgb(${s},${n},${a})`:`rgb(${s},${n},${a},${o})`,d=this._getStrokeDashoffset(e.displayPortion);t.globalAlpha=e.opacity,t.strokeStyle=h,t.fillStyle=h,t.lineWidth=B.STROKE_WIDTH,t.lineCap="round",t.lineJoin="round",t.setLineDash([this._pathLength,this._pathLength],d),t.lineDashOffset=d,ie(t,this._extendedMaskPoints),t.restore()}}class kt{constructor(t){this._strokeRenderers=t.strokes.map(e=>new lr(e))}render(t,e){if(e.opacity<.05)return;const{opacity:r,strokeColor:s,radicalColor:n,strokes:a}=e;for(let o=0;o<this._strokeRenderers.length;o++)this._strokeRenderers[o].render(t,{strokeColor:s,radicalColor:n,opacity:a[o].opacity*r,displayPortion:a[o].displayPortion||0})}}function ur(i,t){if(t.opacity<.05)return;const{opacity:e,strokeWidth:r,strokeColor:s,points:n}=t,{r:a,g:o,b:h,a:d}=s;i.save(),i.globalAlpha=e,i.lineWidth=r,i.strokeStyle=`rgba(${a},${o},${h},${d})`,i.lineCap="round",i.lineJoin="round",ie(i,n),i.restore()}class dr{constructor(t,e){this.destroy=Nt,this._character=t,this._positioner=e,this._mainCharRenderer=new kt(t),this._outlineCharRenderer=new kt(t),this._highlightCharRenderer=new kt(t)}mount(t){this._target=t}_animationFrame(t){const{width:e,height:r,scale:s,xOffset:n,yOffset:a}=this._positioner,o=this._target.getContext();o.clearRect(0,0,e,r),o.save(),o.translate(n,r-a),o.transform(1,0,0,-1,0,0),o.scale(s,s),t(o),o.restore(),o.draw&&o.draw()}render(t){const{outline:e,main:r,highlight:s}=t.character,{outlineColor:n,strokeColor:a,radicalColor:o,highlightColor:h,drawingColor:d,drawingWidth:k}=t.options;this._animationFrame(f=>{this._outlineCharRenderer.render(f,{opacity:e.opacity,strokes:e.strokes,strokeColor:n}),this._mainCharRenderer.render(f,{opacity:r.opacity,strokes:r.strokes,strokeColor:a,radicalColor:o}),this._highlightCharRenderer.render(f,{opacity:s.opacity,strokes:s.strokes,strokeColor:h});const $=t.userStrokes||{};for(const S in $){const M=$[S];if(M){const I={strokeWidth:k,strokeColor:d,...M};ur(f,I)}}})}}class Dt extends se{constructor(t){super(t)}static init(t,e="100%",r="100%"){const s=typeof t=="string"?document.getElementById(t):t;if(!s)throw new Error(`HanziWriter target element not found: ${t}`);const n=s.nodeName.toUpperCase(),a=(()=>{if(n==="CANVAS")return s;const o=document.createElement("canvas");return s.appendChild(o),o})();return a.setAttribute("width",e),a.setAttribute("height",r),new Dt(a)}getContext(){return this.node.getContext("2d")}}var _r={HanziWriterRenderer:dr,createRenderTarget:Dt.init};const fr="2.0",gr=i=>`https://cdn.jsdelivr.net/npm/hanzi-writer-data@${fr}/${i}.json`,pr=(i,t,e)=>{const r=new XMLHttpRequest;r.overrideMimeType&&r.overrideMimeType("application/json"),r.open("GET",gr(i),!0),r.onerror=s=>{e(r,s)},r.onreadystatechange=()=>{r.readyState===4&&(r.status===200?t(JSON.parse(r.responseText)):r.status!==0&&e&&e(r))},r.send(null)},qt={charDataLoader:pr,onLoadCharDataError:null,onLoadCharDataSuccess:null,showOutline:!0,showCharacter:!0,renderer:"svg",width:0,height:0,padding:20,strokeAnimationSpeed:1,strokeFadeDuration:400,strokeHighlightDuration:200,strokeHighlightSpeed:2,delayBetweenStrokes:1e3,delayBetweenLoops:2e3,strokeColor:"#555",radicalColor:null,highlightColor:"#AAF",outlineColor:"#DDD",drawingColor:"#333",leniency:1,showHintAfterMisses:3,highlightOnComplete:!0,highlightCompleteColor:null,markStrokeCorrectAfterMisses:!1,acceptBackwardsStrokes:!1,quizStartStrokeNum:0,averageDistanceThreshold:350,drawingFadeDuration:300,drawingWidth:4,strokeWidth:2,outlineWidth:2,rendererOverride:{}};class Ut{constructor(t){this._loadCounter=0,this._isLoading=!1,this.loadingFailed=!1,this._options=t}_debouncedLoad(t,e){const r=a=>{if(e===this._loadCounter){var o;(o=this._resolve)===null||o===void 0||o.call(this,a)}},s=a=>{if(e===this._loadCounter){var o;(o=this._reject)===null||o===void 0||o.call(this,a)}},n=this._options.charDataLoader(t,r,s);n&&("then"in n?n.then(r).catch(s):r(n))}_setupLoadingPromise(){return new Promise((t,e)=>{this._resolve=t,this._reject=e}).then(t=>{var e,r;return this._isLoading=!1,(e=(r=this._options).onLoadCharDataSuccess)===null||e===void 0||e.call(r,t),t}).catch(t=>{if(this._isLoading=!1,this.loadingFailed=!0,this._options.onLoadCharDataError){this._options.onLoadCharDataError(t);return}if(t instanceof Error)throw t;const e=new Error(`Failed to load char data for ${this._loadingChar}`);throw e.reason=t,e})}loadCharData(t){this._loadingChar=t;const e=this._setupLoadingPromise();return this.loadingFailed=!1,this._isLoading=!0,this._loadCounter++,this._debouncedLoad(t,this._loadCounter),e}}class E{constructor(t,e={}){const{HanziWriterRenderer:r,createRenderTarget:s}=e.renderer==="canvas"?_r:hr,n=e.rendererOverride||{};this._renderer={HanziWriterRenderer:n.HanziWriterRenderer||r,createRenderTarget:n.createRenderTarget||s},this.target=this._renderer.createRenderTarget(t,e.width,e.height),this._options=this._assignOptions(e),this._loadingManager=new Ut(this._options),this._setupListeners()}static create(t,e,r){const s=new E(t,r);return s.setCharacter(e),s}static loadCharacterData(t,e={}){const r=(()=>{const{_loadingManager:s,_loadingOptions:n}=E;return(s==null?void 0:s._loadingChar)===t&&n===e?s:new Ut({...qt,...e})})();return E._loadingManager=r,E._loadingOptions=e,r.loadCharData(t)}static getScalingTransform(t,e,r=0){const s=new Ht({width:t,height:e,padding:r});return{x:s.xOffset,y:s.yOffset,scale:s.scale,transform:ke(`
        translate(${s.xOffset}, ${s.height-s.yOffset})
        scale(${s.scale}, ${-1*s.scale})
      `).replace(/\s+/g," ")}}showCharacter(t={}){return this._options.showCharacter=!0,this._withData(()=>{var e;return(e=this._renderState)===null||e===void 0?void 0:e.run(St("main",this._character,typeof t.duration=="number"?t.duration:this._options.strokeFadeDuration)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}hideCharacter(t={}){return this._options.showCharacter=!1,this._withData(()=>{var e;return(e=this._renderState)===null||e===void 0?void 0:e.run(Y("main",this._character,typeof t.duration=="number"?t.duration:this._options.strokeFadeDuration)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}animateCharacter(t={}){return this.cancelQuiz(),this._withData(()=>{var e;return(e=this._renderState)===null||e===void 0?void 0:e.run(ee("main",this._character,this._options.strokeFadeDuration,this._options.strokeAnimationSpeed,this._options.delayBetweenStrokes)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}animateStroke(t,e={}){return this.cancelQuiz(),this._withData(()=>{var r;return(r=this._renderState)===null||r===void 0?void 0:r.run(Qe("main",this._character,yt(t,this._character.strokes.length),this._options.strokeAnimationSpeed)).then(s=>{var n;return(n=e.onComplete)===null||n===void 0||n.call(e,s),s})})}highlightStroke(t,e={}){const r=()=>{if(!(!this._character||!this._renderState))return this._renderState.run(Kt(pe(this._character.strokes,t),A(this._options.highlightColor),this._options.strokeHighlightSpeed)).then(s=>{var n;return(n=e.onComplete)===null||n===void 0||n.call(e,s),s})};return this._withData(r)}async loopCharacterAnimation(){return this.cancelQuiz(),this._withData(()=>this._renderState.run(Je("main",this._character,this._options.strokeFadeDuration,this._options.strokeAnimationSpeed,this._options.delayBetweenStrokes,this._options.delayBetweenLoops),{loop:!0}))}pauseAnimation(){return this._withData(()=>{var t;return(t=this._renderState)===null||t===void 0?void 0:t.pauseAll()})}resumeAnimation(){return this._withData(()=>{var t;return(t=this._renderState)===null||t===void 0?void 0:t.resumeAll()})}showOutline(t={}){return this._options.showOutline=!0,this._withData(()=>{var e;return(e=this._renderState)===null||e===void 0?void 0:e.run(St("outline",this._character,typeof t.duration=="number"?t.duration:this._options.strokeFadeDuration)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}hideOutline(t={}){return this._options.showOutline=!1,this._withData(()=>{var e;return(e=this._renderState)===null||e===void 0?void 0:e.run(Y("outline",this._character,typeof t.duration=="number"?t.duration:this._options.strokeFadeDuration)).then(r=>{var s;return(s=t.onComplete)===null||s===void 0||s.call(t,r),r})})}updateDimensions({width:t,height:e,padding:r}){if(t!==void 0&&(this._options.width=t),e!==void 0&&(this._options.height=e),r!==void 0&&(this._options.padding=r),this.target.updateDimensions(this._options.width,this._options.height),this._character&&this._renderState&&this._hanziWriterRenderer&&this._positioner){this._hanziWriterRenderer.destroy();const s=this._initAndMountHanziWriterRenderer(this._character);this._renderState.overwriteOnStateChange(n=>s.render(n)),s.render(this._renderState.state),this._quiz&&this._quiz.setPositioner(this._positioner)}}updateColor(t,e,r={}){var s;let n=[];const a=t==="radicalColor"&&!e?this._options.strokeColor:e,o=A(a);this._options[t]=e;const h=(s=r.duration)!==null&&s!==void 0?s:this._options.strokeFadeDuration;return n=n.concat(zt(t,o,h)),t==="radicalColor"&&!e&&(n=n.concat(zt(t,null,0))),this._withData(()=>{var d;return(d=this._renderState)===null||d===void 0?void 0:d.run(n).then(k=>{var f;return(f=r.onComplete)===null||f===void 0||f.call(r,k),k})})}quiz(t={}){return this._withData(async()=>{this._character&&this._renderState&&this._positioner&&(this.cancelQuiz(),this._quiz=new sr(this._character,this._renderState,this._positioner),this._options={...this._options,...t},this._quiz.startQuiz(this._options))})}skipQuizStroke(){this._quiz&&this._quiz.nextStroke()}cancelQuiz(){this._quiz&&(this._quiz.cancel(),this._quiz=void 0)}setCharacter(t){return this.cancelQuiz(),this._char=t,this._hanziWriterRenderer&&this._hanziWriterRenderer.destroy(),this._renderState&&this._renderState.cancelAll(),this._hanziWriterRenderer=null,this._withDataPromise=this._loadingManager.loadCharData(t).then(e=>{if(!e||this._loadingManager.loadingFailed)return;this._character=Ae(t,e),this._renderState=new ye(this._character,this._options,s=>r.render(s));const r=this._initAndMountHanziWriterRenderer(this._character);r.render(this._renderState.state)}),this._withDataPromise}_initAndMountHanziWriterRenderer(t){const{width:e,height:r,padding:s}=this._options;this._positioner=new Ht({width:e,height:r,padding:s});const n=new this._renderer.HanziWriterRenderer(t,this._positioner);return n.mount(this.target),this._hanziWriterRenderer=n,n}async getCharacterData(){if(!this._char)throw new Error("setCharacter() must be called before calling getCharacterData()");return await this._withData(()=>this._character)}_assignOptions(t){const e={...qt,...t};return t.strokeAnimationDuration&&!t.strokeAnimationSpeed&&(e.strokeAnimationSpeed=500/t.strokeAnimationDuration),t.strokeHighlightDuration&&!t.strokeHighlightSpeed&&(e.strokeHighlightSpeed=500/e.strokeHighlightDuration),t.highlightCompleteColor||(e.highlightCompleteColor=e.highlightColor),this._fillWidthAndHeight(e)}_fillWidthAndHeight(t){const e={...t};if(e.width&&!e.height)e.height=e.width;else if(e.height&&!e.width)e.width=e.height;else if(!e.width&&!e.height){const{width:r,height:s}=this.target.getBoundingClientRect(),n=Math.min(r,s);e.width=n,e.height=n}return e}_withData(t){if(this._loadingManager.loadingFailed)throw Error("Failed to load character data. Call setCharacter and try again.");return this._withDataPromise?this._withDataPromise.then(()=>{if(!this._loadingManager.loadingFailed)return t()}):Promise.resolve().then(t)}_setupListeners(){this.target.addPointerStartListener(t=>{this._quiz&&(t.preventDefault(),this._quiz.startUserStroke(t.getPoint()))}),this.target.addPointerMoveListener(t=>{this._quiz&&(t.preventDefault(),this._quiz.continueUserStroke(t.getPoint()))}),this.target.addPointerEndListener(()=>{var t;(t=this._quiz)===null||t===void 0||t.endUserStroke()})}}E._loadingManager=null;E._loadingOptions=null;var ne={exports:{}};(function(i,t){(function(e,r){i.exports=r()})(ge,function(){var e=1e3,r=6e4,s=36e5,n="millisecond",a="second",o="minute",h="hour",d="day",k="week",f="month",$="quarter",S="year",M="date",I="Invalid Date",Pt=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,oe={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(g){var u=["th","st","nd","rd"],c=g%100;return"["+g+(u[(c-20)%10]||u[c]||u[0])+"]"}},lt=function(g,u,c){var _=String(g);return!_||_.length>=u?g:""+Array(u+1-_.length).join(c)+g},ae={s:lt,z:function(g){var u=-g.utcOffset(),c=Math.abs(u),_=Math.floor(c/60),l=c%60;return(u<=0?"+":"-")+lt(_,2,"0")+":"+lt(l,2,"0")},m:function g(u,c){if(u.date()<c.date())return-g(c,u);var _=12*(c.year()-u.year())+(c.month()-u.month()),l=u.clone().add(_,f),p=c-l<0,m=u.clone().add(_+(p?-1:1),f);return+(-(_+(c-l)/(p?l-m:m-l))||0)},a:function(g){return g<0?Math.ceil(g)||0:Math.floor(g)},p:function(g){return{M:f,y:S,w:k,d,D:M,h,m:o,s:a,ms:n,Q:$}[g]||String(g||"").toLowerCase().replace(/s$/,"")},u:function(g){return g===void 0}},Q="en",H={};H[Q]=oe;var Mt="$isDayjsObject",ut=function(g){return g instanceof tt||!(!g||!g[Mt])},K=function g(u,c,_){var l;if(!u)return Q;if(typeof u=="string"){var p=u.toLowerCase();H[p]&&(l=p),c&&(H[p]=c,l=p);var m=u.split("-");if(!l&&m.length>1)return g(m[0])}else{var y=u.name;H[y]=u,l=y}return!_&&l&&(Q=l),l||!_&&Q},D=function(g,u){if(ut(g))return g.clone();var c=typeof u=="object"?u:{};return c.date=g,c.args=arguments,new tt(c)},v=ae;v.l=K,v.i=ut,v.w=function(g,u){return D(g,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var tt=function(){function g(c){this.$L=K(c.locale,null,!0),this.parse(c),this.$x=this.$x||c.x||{},this[Mt]=!0}var u=g.prototype;return u.parse=function(c){this.$d=function(_){var l=_.date,p=_.utc;if(l===null)return new Date(NaN);if(v.u(l))return new Date;if(l instanceof Date)return new Date(l);if(typeof l=="string"&&!/Z$/i.test(l)){var m=l.match(Pt);if(m){var y=m[2]-1||0,C=(m[7]||"0").substring(0,3);return p?new Date(Date.UTC(m[1],y,m[3]||1,m[4]||0,m[5]||0,m[6]||0,C)):new Date(m[1],y,m[3]||1,m[4]||0,m[5]||0,m[6]||0,C)}}return new Date(l)}(c),this.init()},u.init=function(){var c=this.$d;this.$y=c.getFullYear(),this.$M=c.getMonth(),this.$D=c.getDate(),this.$W=c.getDay(),this.$H=c.getHours(),this.$m=c.getMinutes(),this.$s=c.getSeconds(),this.$ms=c.getMilliseconds()},u.$utils=function(){return v},u.isValid=function(){return this.$d.toString()!==I},u.isSame=function(c,_){var l=D(c);return this.startOf(_)<=l&&l<=this.endOf(_)},u.isAfter=function(c,_){return D(c)<this.startOf(_)},u.isBefore=function(c,_){return this.endOf(_)<D(c)},u.$g=function(c,_,l){return v.u(c)?this[_]:this.set(l,c)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(c,_){var l=this,p=!!v.u(_)||_,m=v.p(c),y=function(z,T){var b=v.w(l.$u?Date.UTC(l.$y,T,z):new Date(l.$y,T,z),l);return p?b:b.endOf(d)},C=function(z,T){return v.w(l.toDate()[z].apply(l.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(T)),l)},P=this.$W,x=this.$M,R=this.$D,j="set"+(this.$u?"UTC":"");switch(m){case S:return p?y(1,0):y(31,11);case f:return p?y(1,x):y(0,x+1);case k:var F=this.$locale().weekStart||0,G=(P<F?P+7:P)-F;return y(p?R-G:R+(6-G),x);case d:case M:return C(j+"Hours",0);case h:return C(j+"Minutes",1);case o:return C(j+"Seconds",2);case a:return C(j+"Milliseconds",3);default:return this.clone()}},u.endOf=function(c){return this.startOf(c,!1)},u.$set=function(c,_){var l,p=v.p(c),m="set"+(this.$u?"UTC":""),y=(l={},l[d]=m+"Date",l[M]=m+"Date",l[f]=m+"Month",l[S]=m+"FullYear",l[h]=m+"Hours",l[o]=m+"Minutes",l[a]=m+"Seconds",l[n]=m+"Milliseconds",l)[p],C=p===d?this.$D+(_-this.$W):_;if(p===f||p===S){var P=this.clone().set(M,1);P.$d[y](C),P.init(),this.$d=P.set(M,Math.min(this.$D,P.daysInMonth())).$d}else y&&this.$d[y](C);return this.init(),this},u.set=function(c,_){return this.clone().$set(c,_)},u.get=function(c){return this[v.p(c)]()},u.add=function(c,_){var l,p=this;c=Number(c);var m=v.p(_),y=function(x){var R=D(p);return v.w(R.date(R.date()+Math.round(x*c)),p)};if(m===f)return this.set(f,this.$M+c);if(m===S)return this.set(S,this.$y+c);if(m===d)return y(1);if(m===k)return y(7);var C=(l={},l[o]=r,l[h]=s,l[a]=e,l)[m]||1,P=this.$d.getTime()+c*C;return v.w(P,this)},u.subtract=function(c,_){return this.add(-1*c,_)},u.format=function(c){var _=this,l=this.$locale();if(!this.isValid())return l.invalidDate||I;var p=c||"YYYY-MM-DDTHH:mm:ssZ",m=v.z(this),y=this.$H,C=this.$m,P=this.$M,x=l.weekdays,R=l.months,j=l.meridiem,F=function(T,b,J,et){return T&&(T[b]||T(_,p))||J[b].slice(0,et)},G=function(T){return v.s(y%12||12,T,"0")},z=j||function(T,b,J){var et=T<12?"AM":"PM";return J?et.toLowerCase():et};return p.replace(N,function(T,b){return b||function(J){switch(J){case"YY":return String(_.$y).slice(-2);case"YYYY":return v.s(_.$y,4,"0");case"M":return P+1;case"MM":return v.s(P+1,2,"0");case"MMM":return F(l.monthsShort,P,R,3);case"MMMM":return F(R,P);case"D":return _.$D;case"DD":return v.s(_.$D,2,"0");case"d":return String(_.$W);case"dd":return F(l.weekdaysMin,_.$W,x,2);case"ddd":return F(l.weekdaysShort,_.$W,x,3);case"dddd":return x[_.$W];case"H":return String(y);case"HH":return v.s(y,2,"0");case"h":return G(1);case"hh":return G(2);case"a":return z(y,C,!0);case"A":return z(y,C,!1);case"m":return String(C);case"mm":return v.s(C,2,"0");case"s":return String(_.$s);case"ss":return v.s(_.$s,2,"0");case"SSS":return v.s(_.$ms,3,"0");case"Z":return m}return null}(T)||m.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(c,_,l){var p,m=this,y=v.p(_),C=D(c),P=(C.utcOffset()-this.utcOffset())*r,x=this-C,R=function(){return v.m(m,C)};switch(y){case S:p=R()/12;break;case f:p=R();break;case $:p=R()/3;break;case k:p=(x-P)/6048e5;break;case d:p=(x-P)/864e5;break;case h:p=x/s;break;case o:p=x/r;break;case a:p=x/e;break;default:p=x}return l?p:v.a(p)},u.daysInMonth=function(){return this.endOf(f).$D},u.$locale=function(){return H[this.$L]},u.locale=function(c,_){if(!c)return this.$L;var l=this.clone(),p=K(c,_,!0);return p&&(l.$L=p),l},u.clone=function(){return v.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},g}(),xt=tt.prototype;return D.prototype=xt,[["$ms",n],["$s",a],["$m",o],["$H",h],["$W",d],["$M",f],["$y",S],["$D",M]].forEach(function(g){xt[g[1]]=function(u){return this.$g(u,g[0],g[1])}}),D.extend=function(g,u){return g.$i||(g(u,tt,D),g.$i=!0),D},D.locale=K,D.isDayjs=ut,D.unix=function(g){return D(1e3*g)},D.en=H[Q],D.Ls=H,D.p={},D})})(ne);var mr=ne.exports;const V=fe(mr),kr={class:"writer-container"},vr="祝,阔爱的魏师傅,生日快乐呀,希望你,在未来的日子里,天天好心情,事事都顺心,愿你一切安好,一切顺利,一切的美好,都属于魏志青",Sr=he({__name:"index",setup(i){const t=Tt(),e=ce(()=>vr.split(",").map(h=>h.split(""))),r=Tt(!1);le(()=>{s();const o="2024-01-21";console.log(V()),console.log(V(o)),V().isSame(V(o),"day")&&(r.value=!0),console.log(V().isSame(V(o),"day"))});const s=async()=>{let o=0;for(const h in e.value)for(const d in e.value[h])await a({dom:t.value[o],text:e.value[h][d],config:{strokeColor:n()}}).animateCharacter(),o++},n=()=>{const o=Math.floor(Math.random()*256),h=Math.floor(Math.random()*256),d=Math.floor(Math.random()*256);return"rgb("+o+","+h+","+d+")"},a=({dom:o,text:h,config:d={}})=>{const k={width:45,height:45,padding:5,delayBetweenStrokes:0,strokeAnimationSpeed:5,showCharacter:!1,showOutline:!1};return E.create(o,h,{...k,...d})};return(o,h)=>ue((Z(),X("div",kr,[(Z(!0),X(Rt,null,Ot(e.value,(d,k)=>(Z(),X("div",{class:"writer-content",key:k},[(Z(!0),X(Rt,null,Ot(d,(f,$)=>(Z(),X("div",{class:"writer",key:$,ref_for:!0,ref_key:"writerRef",ref:t}))),128))]))),128))],512)),[[de,r.value]])}}),Cr=_e(Sr,[["__scopeId","data-v-ac50d49d"]]);export{Cr as default};
