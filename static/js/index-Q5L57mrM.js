import{d as T,c as s,x as w,i as p,a as S,b as g,F as R,r as V,q as k,o as L,G as $,k as D,z,B as I,C as j,E as q,t as E,_ as F}from"./index-By46uPpP.js";const G=T({__name:"VirtualScroller",props:{list:{default:()=>[]},height:{default:300},itemHeight:{default:32},preloadNum:{default:5}},emits:["arriveBottom"],setup(f,{emit:m}){const t=f,c=m,d=s(()=>t.list.length*t.itemHeight),h=s(()=>!d.value||!t.height||!v.value?!1:v.value+t.height>=d.value);w(h,()=>{h.value&&c("arriveBottom")});const e=s(()=>({width:"100%",height:`${t.height}px`,"overflow-y":"auto"})),N=s(()=>{let n=o.value*t.itemHeight,r=d.value-n;return r<0&&(r=d.value,n=0),{width:"100%",height:`${r}px`,marginTop:`${n}px`}}),v=p(0),b=n=>{v.value=n.target.scrollTop},y=s(()=>t.preloadNum&&!isNaN(t.preloadNum)&&t.preloadNum>0?t.preloadNum:5),H=s(()=>t.height?Math.ceil(t.height/t.itemHeight):0),l=s(()=>Math.floor(v.value/t.itemHeight)),o=s(()=>{const n=l.value-y.value;return n<0?0:n}),a=s(()=>{const n=l.value+H.value+y.value;return n>t.list.length?t.list.length:n}),i=s(()=>t.list.slice(o.value,a.value));return(n,r)=>(L(),S("div",{ref:"outerScrollerRef",style:k(e.value),onScroll:b},[g("div",{ref:"innerScrollerRef",style:k(N.value)},[(L(!0),S(R,null,V(i.value,(_,u)=>(L(),S("div",{key:_.name,style:k({height:`${t.itemHeight}px`})},[$(n.$slots,"default",{index:u+o.value,item:_})],4))),128))],4)],36))}});function P(f){const t=p((()=>{const e=document.createElement("div");return e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="center",e.style.zIndex="9999",e.style.backgroundColor="rgba(0, 0, 0, 0.5)",e.innerHTML="Loading...",e.style.visibility="hidden",e})());w(f,()=>{if(f){const e=f.value;e==null||e.appendChild(t.value)}else{const e=document.body;e==null||e.appendChild(t.value)}});const c=p(!1);return{loading:c,startLoading:()=>{t.value.style.visibility="visible",c.value=!0},endLoading:()=>{t.value.style.visibility="hidden",c.value=!1}}}const U={class:"virtual-list-container"},J={class:"content-header"},K=T({__name:"index",setup(f){const m=p(),t=s(()=>{var l;return((l=m.value)==null?void 0:l.clientHeight)-48}),{startLoading:c,endLoading:d}=P(m),h=p(""),e=p([]),N=s(()=>e.value.filter(l=>l.name.includes(h.value)));D(()=>{e.value=y()});const v=()=>{e.value=[...e.value,...y(50)]},b=()=>{c(),setTimeout(()=>{v(),d()},1e3*2)},y=(l=200)=>{const o=[],a=l;for(let i=0;i<a;i++)o.push({name:H(10)});return o};function H(l){const o="abacdefghjklmnopqrstuvwxyzABCDEFGHJKLMNOPQRSTUVWXYZ0123456789",i=o.length-1;let n="";l=l||15;for(let r=0,_;r<l;r++)_=function(u,x){return u(0,i,x,u)}(function(u,x,C,M){let B=Math.floor(Math.random()*(x-u+1)+u);const A=o.length-10;return C==0&&B>=A&&(B=M(u,x,C,M)),B},r),n+=o[_];return n}return(l,o)=>(L(),S("div",U,[g("div",{ref_key:"contentRef",ref:m,class:"content"},[g("div",J,[z(g("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>h.value=a)},null,512),[[I,h.value]]),g("button",{onClick:v},"+Add")]),j(G,{list:N.value,itemHeight:28,height:t.value,onArriveBottom:b},{default:q(({item:a,index:i})=>[g("div",null,E(i+"-"+a.name),1)]),_:1},8,["list","height"])],512)]))}}),Q=F(K,[["__scopeId","data-v-2092e3f1"]]);export{Q as default};
